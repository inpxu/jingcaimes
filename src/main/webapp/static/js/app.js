webpackJsonp([1],{"+DJr":function(e,t){},"+aqm":function(e,t){},"+pt3":function(e,t){},"0KgS":function(e,t){},"4aqK":function(e,t){},"5usR":function(e,t){},"6I8k":function(e,t){},"7hxv":function(e,t){},"7pd4":function(e,t){},"7xIN":function(e,t){},"8k8b":function(e,t){},"9kjD":function(e,t){},"9laP":function(e,t){},FArn:function(e,t){},Fc3Z:function(e,t){},HImF:function(e,t){},KhYh:function(e,t){},LZuR:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("IvJb"),o=a("4YfN"),s=a.n(o),r=a("9rMa"),l={name:"app",data:function(){return{}},methods:s()({},Object(r.c)(["setUserImg","setUserName","setCompanyName","setCompanyEnglish","setCompanyLogo"])),props:["ports","userName","userImg","companyName","companyEnglish","companyLogo","menuList"],created:function(){sessionStorage.setItem("ports",this.ports),this.$store.commit("set_ports",this.ports),this.setUserImg(this.userImg),this.setUserName(this.userName),this.setCompanyName(this.companyName),this.setCompanyEnglish(this.companyEnglish),this.setCompanyLogo(this.companyLogo),this.$router.push({path:"/index"}),this.$store.commit("setList",this.menuList)},mounted:function(){this.log("12123123123123123")}},n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"app-view"},[t("router-view")],1)},staticRenderFns:[]};var c=a("vSla")(l,n,!1,function(e){a("lsEp")},null,null).exports,d=a("Axgm"),u=a.n(d),m=(a("dRIH"),a("zO6J")),p=a("3cXf"),f=a.n(p),h={data:function(){return{pageData:{pocHeaderData:[],sidebarData:[{visible:!0,title:"MES管理系统",chlid:[{name:"物控中心",router:"wk",chlid:[{name:"工艺设置",router:"technology"},{name:"产品库",router:"product"},{name:"半成品库",router:"semi-manufactures"},{name:"产品工艺",router:"productProcess"}]},{name:"排程管理",router:"pc",chlid:[{name:"内部订单",router:"internalOrder"},{name:"内部订单审批",router:"approve"},{name:"工艺任务分配",router:"tasking"},{name:"工艺任务领取",router:"receive"},{name:"任务分配记录",router:"taskingRecord"}]},{name:"任务交工",router:"rwjg",chlid:[{name:"交工",router:"jobAssignment"},{name:"任务交工记录",router:"jobAssignmentHistory"}]},{name:"电子发图",router:"electronicHairMap"},{name:"客户管理",router:"customerManagement",chlid:[{name:"查看上传资料",router:"seeUpload"},{name:"客户评审",router:"customerReview"},{name:"客户工艺评审",router:"customerProcessReview"},{name:"客户上传资料",router:"customerUploadData"}]}]}]}}},computed:s()({},Object(r.d)(["menuList","ports"])),beforeMount:function(){this.$set(this.pageData.sidebarData[0],"chlid",JSON.parse(f()(this.menuList)))}},g={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("page",{attrs:{pageData:this.pageData}})],1)},staticRenderFns:[]};var b=a("vSla")(h,g,!1,function(e){a("qhJx")},null,null).exports,v=a("aA9S"),y=a.n(v),_=a("HzJ8"),w=a.n(_);var C={isRepeat:function(e,t,a){if(function(e){var t={};for(var a in e){if(t[e[a]])return!0;t[e[a]]=!0}return!1}(t))return a(new Error("输入重复"));a()},hexadecimal:function(e,t,a){if(!/^[0-9a-fA-F]{1,}$/.test(t))return a(new Error("必须为十六进制字符"));a()},require:function(e,t){var a="此项不能为空";return t&&(a=t),"string"!=e?[{required:!0,type:e,message:a,trigger:"change"}]:[{required:!0,message:a,trigger:"change"},{validator:function(e,t,a){/^\s*$/.test(t)?a(new Error("不可为全空格")):a()},trigger:"change"}]},phone:function(e,t,a){if(!/^1[34578]\d{9}$/.test(t))return a(new Error("请输入正确的手机号码"));a()},IDcard:function(e,t,a){if(!/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/.test(t))return a(new Error("请输入正确的身份证号码"));a()},email:function(e,t,a){if(!/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/.test(t))return a(new Error("请输入正确的邮箱"));a()},chineseName:function(e,t,a){if(!/^[\u4e00-\u9fa5]{2,4}$/.test(t))return a(new Error("请输入正确的中文名"));a()},EnglishName:function(e,t,a){if(t&&!/^[a-zA-Z\/ ]{2,20}$/.test(t))return a(new Error("请输入正确的英文名"));a()},isEmpty:function(e,t,a){if(/^\s{0,}$/.test(t))return a(new Error("输入不能为空"));a()},isUserName:function(e,t,a){if(!/^[\u4e00-\u9fa5\w_-]{4,20}$/.test(t))return a(new Error("用户名输入格式有误"));a()},isPassword:function(e,t,a){if(!/^.{6,20}$/.test(t))return a(new Error("密码输入格式有误"));a()},credit:function(e,t,a){if(!/[^_IOZSVa-z\W]{2}\d{6}[^_IOZSVa-z\W]{10}/g.test(t))return a(new Error("统一社会信用代码输入格式有误"));a()}},x={data:function(){return{deleteArr:[],selectData:[],rules:{crafworkName:C.require("string","工艺名称不能为空"),quartersEmp:C.require("string","请选择工艺岗位"),actHours:C.require("number","标准工时不能为空"),unit:C.require("string","计量单位不能为空")},searchData:{},searchConfig:[[{label:"工艺名称",field:"crafworkName",type:"input",placeholder:"请输入姓名"}]],tableData:[],tableConfig:{isHigh:!1,isSelection:!0,align:"center",loadShow:!1,isPage:!0,pageNo:1,pageSize:20,total:0,colConfig:[{fixed:!1,field:"crafworkName",width:"",isSort:!1,isResize:!0,label:"工艺名称",align:"center",type:"text"},{fixed:!1,field:"quartersEmp",width:"",isSort:!1,isResize:!0,label:"工艺岗位",align:"center",type:"text"},{fixed:!1,field:"actHours",width:"",isSort:!1,isResize:!0,label:"标准工时",align:"center",type:"text"},{fixed:!1,field:"unit",width:"",isSort:!1,isResize:!0,label:"计量单位",align:"center",type:"text"},{fixed:!1,width:"",isSort:!1,isResize:!0,label:"操作",align:"center",type:"button",btnData:[{name:"参数设置",method:"set"}]}]},toolbarConfig:{custom:[{icon:"plus",type:"primary",method:"handlerAdd",name:"新增"},{icon:"edit",type:"",method:"handlerEdit",name:"编辑"},{icon:"delete",type:"",method:"handlerDel",name:"删除"}],btnStatus:[!1,!0,!0]},toastConfig:{title:"新增工艺",dialogVisible:!1,width:"500px",btnData:[{isShow:!0,disabled:!1,name:"取消",method:"cancel"},{disabled:!1,isShow:!0,type:"primary",name:"确定",method:"submit"},{disabled:!1,isShow:!0,name:"确定并继续",type:"primary",method:"savaAgain",bgColor:"dialog-deep-blue"}]},form:{crafworkName:"",quartersEmp:"",actHours:"",unit:""},jobs:[],paramForm:{list:[]},paramSet:{title:"参数设置",dialogVisible:!1,width:"500px",btnData:[{isShow:!0,disabled:!1,name:"取消",method:"cancel"},{disabled:!1,isShow:!0,type:"primary",name:"保存",method:"submit"}]}}},computed:s()({},Object(r.d)(["ports"])),methods:{set:function(e,t){var a=this;console.log(e),this.$http.post(this.ports+"/crafworkStructPlm/findParamByStructId",{crafworkId:e.id},function(t){a.paramForm.list=[];var i=!0,o=!1,s=void 0;try{for(var r,l=w()(t);!(i=(r=l.next()).done);i=!0){var n=r.value;a.paramForm.list.push({crafworkId:n.crafworkId,id:n.id,paramName:n.paramName})}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}a.deleteArr=[],0==a.paramForm.list.length&&a.paramForm.list.push({paramName:"",id:null,crafworkId:e.id}),a.paramSet.dialogVisible=!0,console.log(t,"最新版")},this)},handlerAdd:function(){this.toastConfig.title="新增工艺",this.form={crafworkName:"",quartersEmp:"",actHours:"",unit:"",id:0},this.toastConfig.btnData[2].isShow=!0,this.toastConfig.dialogVisible=!0},paramSubmit:function(){var e=this;this.$http.post_noqs(this.ports+"/crafworkStructPlm/updateParam",this.paramForm.list,function(t){e.$message({type:"success",message:"参数设置成功!"}),e.paramSet.dialogVisible=!1},this)},handlerDel:function(){var e=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[],a=!0,i=!1,o=void 0;try{for(var s,r=w()(e.selectData);!(a=(s=r.next()).done);a=!0){var l=s.value;t.push(l.id)}}catch(e){i=!0,o=e}finally{try{!a&&r.return&&r.return()}finally{if(i)throw o}}e.$http.post(e.ports+"/crafworkStructPlm/remove",{ids:t.join(",")},function(t){e.getList(),e.$message({type:"success",message:"删除成功!"})},e)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},savaAgain:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$http.post(e.ports+"/crafworkStructPlm/add",e.form,function(t){e.$refs.ruleForm.resetFields(),e.toastConfig.dialogVisible=!0,e.getList()},e)})},submit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;0==e.form.id?e.$http.post(e.ports+"/crafworkStructPlm/add",e.form,function(t){e.$refs.ruleForm.resetFields(),e.toastConfig.dialogVisible=!1,e.getList(),e.$message({type:"success",message:"新增成功!"})},e):e.$http.post(e.ports+"/crafworkStructPlm/update",e.form,function(t){e.$refs.ruleForm.resetFields(),e.toastConfig.dialogVisible=!1,e.form={crafworkName:"",quartersEmp:"",actHours:"",unit:""},e.getList(),e.$message({type:"success",message:"编辑成功!"})},e)})},select:function(e){this.selectData=e,1==e.length?this.toolbarConfig.btnStatus=[!1,!1,!1]:0==e.length?this.toolbarConfig.btnStatus=[!1,!0,!0]:this.toolbarConfig.btnStatus=[!1,!0,!1]},listAdd:function(e,t){this.paramForm.list.splice(e+1,0,{paramName:"",id:null,crafworkId:t.crafworkId})},handlerSearch:function(){this.tableConfig.pageNo=1,this.tableConfig.pageSize=20,this.getList()},handlerEdit:function(){this.toastConfig.title="编辑工艺",this.form=y()({},this.selectData[0]),this.toastConfig.btnData[2].isShow=!1,this.toastConfig.dialogVisible=!0},getList:function(){var e=this;this.$http.post(this.ports+"/crafworkStructPlm/page",s()({pageNo:this.tableConfig.pageNo,pageSize:this.tableConfig.pageSize},this.searchData),function(t){e.tableData=t.items,e.tableConfig.total=t.numRows},this)},pageChange:function(){this.getList()}},mounted:function(){var e=this;this.getList(),this.$http.post(this.ports+"/crafworkStructPlm/optionQuarters",{},function(t){e.jobs=t},this)}},S={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"technology"},[a("search",{attrs:{data:e.searchData,config:e.searchConfig},on:{search:e.handlerSearch}}),e._v(" "),a("toolbar",{attrs:{toolbarConfig:e.toolbarConfig},on:{handlerAdd:e.handlerAdd,handlerEdit:e.handlerEdit,handlerDel:e.handlerDel}}),e._v(" "),a("my-table",{attrs:{data:e.tableData,config:e.tableConfig},on:{pageChange:e.pageChange,set:e.set,select:e.select}}),e._v(" "),a("my-toast",{attrs:{config:e.toastConfig},on:{submit:e.submit,cancel:function(t){e.toastConfig.dialogVisible=!1,e.$refs.ruleForm.resetFields()},savaAgain:e.savaAgain}},[1==e.toastConfig.dialogVisible?a("el-form",{ref:"ruleForm",staticStyle:{"margin-right":"30px"},attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"工艺名称",prop:"crafworkName"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.form.crafworkName,callback:function(t){e.$set(e.form,"crafworkName",t)},expression:"form.crafworkName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"工艺岗位",prop:"quartersEmp"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择工艺岗位",size:"medium"},model:{value:e.form.quartersEmp,callback:function(t){e.$set(e.form,"quartersEmp",t)},expression:"form.quartersEmp"}},e._l(e.jobs,function(e,t){return a("el-option",{key:t,attrs:{label:e.quartersDesc,value:e.quartersDesc}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"标准工时",prop:"actHours"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,controls:!1,size:"medium"},model:{value:e.form.actHours,callback:function(t){e.$set(e.form,"actHours",t)},expression:"form.actHours"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"计量单位",prop:"unit"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}})],1)],1):e._e()],1),e._v(" "),a("my-toast",{attrs:{config:e.paramSet},on:{cancel:function(t){e.paramSet.dialogVisible=!1},submit:e.paramSubmit}},[a("div",{staticClass:"my-list"},[a("el-form",{staticStyle:{"margin-right":"30px"},attrs:{model:e.paramForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"工艺参数名"}},e._l(e.paramForm.list,function(t,i){return a("div",{key:i,staticClass:"template"},[a("div",{staticClass:"text"},[a("el-input",{attrs:{size:"medium"},model:{value:t.paramName,callback:function(a){e.$set(t,"paramName",a)},expression:"item.paramName"}})],1),e._v(" "),a("div",{staticClass:"operate"},[a("el-button",{attrs:{icon:"el-icon-plus",type:"text"},on:{click:function(a){e.listAdd(i,t)}}}),e._v(" "),a("el-button",{attrs:{icon:"el-icon-delete",disabled:1==e.paramForm.list.length,type:"text"},on:{click:function(a){e.paramForm.list.splice(i,1),e.deleteArr.push(t.id)}}})],1)])}))],1)],1)])],1)},staticRenderFns:[]};var D=a("vSla")(x,S,!1,function(e){a("m4aw")},null,null).exports,N={data:function(){return{rules:{prodName:C.require("string","产品名称不能为空"),prodNo:C.require("string","产品编码不能为空"),typeId:C.require("string","请选择产品分类")},searchData:{},searchConfig:[[{label:"产品信息",field:"prodName",type:"input",placeholder:"请输入产品信息"},{label:"产品编码",field:"prodNo",type:"input",placeholder:"请输入产品编码"}]],tableData:[],tableConfig:{isHigh:!1,isSelection:!0,align:"center",isPage:!0,pageNo:1,pageSize:20,total:0,currentSelectArr:[],colConfig:[{fixed:!1,field:"prodName",width:"",isSort:!1,isResize:!0,label:"产品名称",align:"center",type:"text"},{fixed:!1,field:"prodNo",width:"",isSort:!1,isResize:!0,label:"产品编码",align:"center",type:"text"},{fixed:!1,field:"typeDesc",width:"",isSort:!1,isResize:!0,label:"图片分类",align:"center",type:"text"},{fixed:!1,field:"norms",width:"",isSort:!1,isResize:!0,label:"规格",align:"center",type:"text"},{fixed:!1,field:"modelDesc",width:"",isSort:!1,isResize:!0,label:"型号",align:"center",type:"text"},{fixed:!1,field:"param",width:"",isSort:!1,isResize:!0,label:"参数",align:"center",type:"text"},{fixed:!1,field:"unit",width:"",isSort:!1,isResize:!0,label:"计量单位",align:"center",type:"text"},{fixed:!1,field:"prodStatus",width:"",isSort:!1,isResize:!0,label:"产品状态",align:"center",type:"text"},{fixed:!1,width:"150",isSort:!1,isResize:!0,label:"操作",align:"center",type:"button",btnData:[{name:"查看详情",method:"see"}]}]},toolbarConfig:{custom:[{icon:"plus",type:"primary",method:"handlerAdd",name:"新增"},{icon:"edit",type:"",method:"handlerEdit",name:"编辑"},{icon:"el-icon-search",type:"primary",method:"handlerDel",name:"关闭产品"}],btnStatus:[!1,!0,!0]},toastConfig:{title:"编辑产品",dialogVisible:!1,width:"752px",btnData:[{isShow:!0,disabled:!1,name:"取消",method:"cancel"},{disabled:!1,isShow:!0,type:"primary",name:"确定",method:"submit"},{disabled:!1,isShow:!0,name:"确定并继续",type:"primary",method:"savaAgain",bgColor:"dialog-deep-blue"}]},form:{prodName:"",prodNo:"",norms:"",param:"",modelDesc:"",unit:"",typeId:"",prodStatus:""},viewForm:{},detailConfig:{title:"查看详情",dialogVisible:!1,width:"752px",btnData:[{isShow:!0,disabled:!1,name:"关闭窗口",method:"cancel"}]}}},computed:s()({},Object(r.d)(["ports","prodTypeList"])),methods:{handlerAdd:function(){this.toastConfig.title="新增产品",this.toastConfig.btnData[2].isShow=!0,this.form={prodName:"",prodNo:"",norms:"",param:"",modelDesc:"",unit:"",typeId:"",id:0},this.toastConfig.dialogVisible=!0},handlerEdit:function(){this.toastConfig.title="编辑产品",this.form=y()({},this.selectData[0]),this.toastConfig.btnData[2].isShow=!1,this.toastConfig.dialogVisible=!0},handlerDel:function(){var e=this;console.log(this.selectData);for(var t=[],a=[],i=!1,o="是否关闭",s=0;s<this.selectData.length;s++)"关闭"==this.selectData[s].prodStatus?(a.push(this.selectData[s].prodName),i=!0):t.push(this.selectData[s].id);if(i&&t.length>0)o=a.join(",")+"已关闭，系统已自动去除，是否继续关闭其他产品";else if(t.length<=0)return this.$message({type:"warning",message:"请勿重复关闭!"});this.$confirm(o,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.post(e.ports+"/productStorePlm/closeProdStatus",{ids:t.join(",")},function(t){e.getList(),e.$message({type:"success",message:"关闭成功!"})},e)}).catch(function(){e.$message({type:"info",message:"已取消关闭"})})},submit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;0==e.form.id?e.$http.post(e.ports+"/productStorePlm/addProduct",e.form,function(t){e.$refs.ruleForm.resetFields(),e.toastConfig.dialogVisible=!1,e.$message({type:"success",message:"新增成功!"}),e.getList()},e):e.$http.post(e.ports+"/productStorePlm/updateProduct",e.form,function(t){e.$message({type:"success",message:"编辑成功!"}),e.$refs.ruleForm.resetFields(),e.toastConfig.dialogVisible=!1,e.getList()},e)})},savaAgain:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$http.post(e.ports+"/productStorePlm/addProduct",e.form,function(t){e.form={prodName:"",prodNo:"",norms:"",param:"",modelDesc:"",unit:"",typeId:"",id:0},e.$message({type:"success",message:"新增成功!"}),e.$refs.ruleForm.resetFields(),e.getList()},e)})},select:function(e){this.selectData=e,1==e.length?this.toolbarConfig.btnStatus=[!1,!1,!1]:0==e.length?this.toolbarConfig.btnStatus=[!1,!0,!0]:this.toolbarConfig.btnStatus=[!1,!0,!1]},getList:function(){var e=this;this.$http.post(this.ports+"/productStorePlm/pageProduct",s()({pageNo:this.tableConfig.pageNo,pageSize:this.tableConfig.pageSize},this.searchData),function(t){e.tableData=t.items,e.tableConfig.total=t.numRows},this)},pageChange:function(){this.getList()},search:function(){this.tableConfig.pageNo=1,this.tableConfig.pageSize=20,this.getList()},see:function(e){this.viewForm=y()({},e),this.detailConfig.dialogVisible=!0}},mounted:function(){this.getList()}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"productLibrary"},[a("search",{attrs:{data:e.searchData,config:e.searchConfig},on:{search:e.search}}),e._v(" "),a("toolbar",{attrs:{toolbarConfig:e.toolbarConfig},on:{handlerAdd:e.handlerAdd,handlerEdit:e.handlerEdit,handlerDel:e.handlerDel}}),e._v(" "),a("my-table",{attrs:{data:e.tableData,config:e.tableConfig},on:{pageChange:e.pageChange,select:e.select,see:e.see}}),e._v(" "),a("my-toast",{attrs:{config:e.toastConfig},on:{submit:e.submit,cancel:function(t){e.toastConfig.dialogVisible=!1,e.$refs.ruleForm.resetFields()},savaAgain:e.savaAgain}},[1==e.toastConfig.dialogVisible?a("el-form",{ref:"ruleForm",staticStyle:{"margin-right":"30px"},attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品编码",prop:"prodNo"}},[a("el-input",{attrs:{disabled:0!=e.form.id,size:"medium"},model:{value:e.form.prodNo,callback:function(t){e.$set(e.form,"prodNo",t)},expression:"form.prodNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品名称",prop:"prodName"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.form.prodName,callback:function(t){e.$set(e.form,"prodName",t)},expression:"form.prodName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品分类",prop:"typeId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"medium"},model:{value:e.form.typeId,callback:function(t){e.$set(e.form,"typeId",t)},expression:"form.typeId"}},e._l(e.prodTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.typeDesc,value:e.id}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"规格"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.form.norms,callback:function(t){e.$set(e.form,"norms",t)},expression:"form.norms"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"参数"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.form.param,callback:function(t){e.$set(e.form,"param",t)},expression:"form.param"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"型号"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.form.modelDesc,callback:function(t){e.$set(e.form,"modelDesc",t)},expression:"form.modelDesc"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计量单位"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品状态"}},[a("span",[e._v("正常供货")])])],1)],1)],1):e._e()],1),e._v(" "),a("my-toast",{attrs:{config:e.detailConfig},on:{cancel:function(t){e.detailConfig.dialogVisible=!1}}},[a("el-form",{ref:"ruleForm",staticStyle:{"margin-right":"30px"},attrs:{model:e.viewForm,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品编码"}},[e._v("\n                        "+e._s(e.viewForm.prodNo)+"\n                    ")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品名称"}},[e._v("\n                        "+e._s(e.viewForm.prodName)+"\n                    ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品分类"}},[e._v("\n                        "+e._s(e.viewForm.typeDesc)+"\n                    ")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"规格"}},[e._v("\n                        "+e._s(e.viewForm.norms)+"\n                    ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"参数"}},[e._v("\n                        "+e._s(e.viewForm.param)+"\n                    ")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"型号"}},[e._v("\n                        "+e._s(e.viewForm.modelDesc)+"\n                    ")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计量单位"}},[e._v("\n                        "+e._s(e.viewForm.unit)+"\n                    ")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var $=a("vSla")(N,k,!1,function(e){a("FArn")},null,null).exports,z={data:function(){return{showInputList:[],toolbarConfig:{custom:[{icon:"plus",type:"primary",method:"handlerAdd",name:"新增"}],btnStatus:[!1]},tableData:[{typeDesc:123}]}},computed:s()({},Object(r.d)(["ports"])),methods:{handlerAdd:function(){var e=this;this.$prompt("请输入分类名称","新增分类",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var a=t.value;e.$http.post(e.ports+"/prodType/add",{typeDesc:a},function(t){e.$message({type:"success",message:"新增成功"}),e.showInputList.push(!1),e.tableData.push(t)},e)}).catch(function(){e.$message({type:"info",message:"取消输入"})})},handlerEdit:function(e,t,a){this.$set(this.showInputList,t,!0)},handleDelete:function(e,t,a){var i=this;this.$http.post(this.ports+"/prodType/remove",{ids:a.id},function(e){i.showInputList.splice(t,1),i.tableData.splice(t,1)},this)},handlerEditSuccess:function(e,t,a){var i=this;this.$http.post(this.ports+"/prodType/update",a,function(e){console.log(e),i.$set(i.showInputList,t,!1),i.tableData[t]=e},this)},getList:function(){var e=this;this.$http.post(this.ports+"/prodType/page",{pageSize:2e3,pageNo:1},function(t){e.tableData=t.items;var a=!0,i=!1,o=void 0;try{for(var s,r=w()(t.items);!(a=(s=r.next()).done);a=!0){s.value;e.showInputList.push(!1)}}catch(e){i=!0,o=e}finally{try{!a&&r.return&&r.return()}finally{if(i)throw o}}e.$store.commit("setProdTypeList",t.items)},this)}},mounted:function(){this.getList()}},F={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"setType"},[a("toolbar",{attrs:{toolbarConfig:e.toolbarConfig},on:{handlerAdd:e.handlerAdd}}),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{label:"分类名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.showInputList[t.$index]?e._e():a("span",{staticClass:"text",staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.typeDesc))]),e._v(" "),e.showInputList[t.$index]?a("el-input",{staticClass:"editInput",staticStyle:{width:"180px"},attrs:{placeholder:"请输入分类名称",size:"mini"},model:{value:t.row.typeDesc,callback:function(a){e.$set(t.row,"typeDesc",a)},expression:"scope.row.typeDesc"}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.showInputList[t.$index]?e._e():a("el-button",{staticClass:"editBtn",attrs:{size:"mini",type:"text"},on:{click:function(a){e.handlerEdit(a,t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),e.showInputList[t.$index]?a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.handlerEditSuccess(a,t.$index,t.row)}}},[e._v("保存")]):e._e(),e._v(" "),a("el-button",{staticStyle:{color:"#F6463B","margin-left":"30px"},attrs:{size:"mini",type:"text"},on:{click:function(a){e.handleDelete(a,t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var L={data:function(){return{activeName:"first"}},components:{setType:a("vSla")(z,F,!1,function(e){a("LZuR")},null,null).exports,productLibrary:$}},I={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"product"},[a("el-tabs",{attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"产品库",name:"first"}},["first"==e.activeName?a("product-library"):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:"分类设置",name:"second"}},[a("set-type",{directives:[{name:"show",rawName:"v-show",value:"second"==e.activeName,expression:"activeName=='second'"}]})],1)],1)],1)},staticRenderFns:[]};var A=a("vSla")(L,I,!1,function(e){a("7pd4")},null,null).exports,R={data:function(){return{rules:{message:C.require("string","请选择产品信息"),midProdNo:C.require("string","半产品编码不能为空"),unit:C.require("string","计量单位不能为空")},prodNos:[],searchData:{},searchConfig:[[{label:"半成品编码",field:"midProdNo",type:"input",placeholder:"请输入姓名"},{label:"产品信息",field:"prodNo",type:"input",placeholder:"请输入手机号码"}]],tableData:[],tableConfig:{isHigh:!1,isSelection:!0,align:"center",isPage:!0,pageNo:1,pageSize:20,total:0,currentSelectArr:[],colConfig:[{fixed:!1,field:"midProdNo",isSort:!1,isResize:!0,label:"半成品编码",align:"center",type:"text"},{fixed:!1,field:"prodName",isSort:!1,isResize:!0,label:"产品名称",align:"center",type:"text"},{fixed:!1,field:"prodNo",isSort:!1,isResize:!0,label:"产品编码",align:"center",type:"text"},{fixed:!1,field:"param",isSort:!1,isResize:!0,label:"参数",align:"center",type:"text"},{fixed:!1,field:"norms",isSort:!1,isResize:!0,label:"规格",align:"center",type:"text"},{fixed:!1,field:"modelDesc",isSort:!1,isResize:!0,label:"型号",align:"center",type:"text"},{fixed:!1,width:"140px",isSort:!1,isResize:!0,label:"操作",align:"center",type:"button",btnData:[{name:"查看详情",method:"see"}]}]},toolbarConfig:{custom:[{icon:"plus",type:"primary",method:"handlerAdd",name:"新增"},{icon:"edit",type:"",method:"handlerEdit",name:"编辑"},{icon:"delete",type:"",method:"handlerDel",name:"删除"}],btnStatus:[!1,!0,!0]},toastConfig:{title:"新增半成品",dialogVisible:!1,width:"752px",btnData:[{isShow:!0,disabled:!1,name:"取消",method:"cancel"},{disabled:!1,isShow:!0,type:"primary",name:"确定",method:"submit"},{disabled:!1,isShow:!0,name:"确定并继续",type:"primary",method:"savaAgain",bgColor:"dialog-deep-blue"}]},form:{midProdNo:"",prodName:"",prodNo:"",param:"",norms:"",modelDesc:"",unit:"",remark:""},productList:[],viewForm:{},detailConfig:{title:"查看详情",dialogVisible:!1,width:"752px",btnData:[{isShow:!0,disabled:!1,name:"关闭窗口",method:"cancel"}]}}},computed:s()({},Object(r.d)(["ports","prodTypeList"])),methods:{handlerChange:function(e){if(e){var t=e.split(",");this.form.prodName=t[1],this.form.prodNo=t[0]}},handlerAdd:function(){this.toastConfig.btnData[2].isShow=!0,this.toastConfig.title="新增半成品",this.form={midProdNo:"",prodName:"",prodNo:"",param:"",norms:"",modelDesc:"",unit:"",remark:"",message:"",id:0},this.toastConfig.dialogVisible=!0},handlerEdit:function(){this.toastConfig.title="编辑半成品",this.form=y()({},this.selectData[0]),this.$set(this.form,"message",this.selectData[0].prodNo+","+this.selectData[0].prodName),this.toastConfig.btnData[2].isShow=!1,this.toastConfig.dialogVisible=!0},handlerDel:function(){var e=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[],a=!0,i=!1,o=void 0;try{for(var s,r=w()(e.selectData);!(a=(s=r.next()).done);a=!0){var l=s.value;t.push(l.id)}}catch(e){i=!0,o=e}finally{try{!a&&r.return&&r.return()}finally{if(i)throw o}}e.$http.post(e.ports+"/midProduct/remove",{ids:t.join(",")},function(t){e.getList(),e.$message({type:"success",message:"删除成功!"})},e)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},submit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;0==e.form.id?e.$http.post(e.ports+"/midProduct/add",e.form,function(t){e.$message({type:"success",message:"新增成功!"}),e.$refs.ruleForm.resetFields(),e.toastConfig.dialogVisible=!1,e.getList()},e):e.$http.post(e.ports+"/midProduct/update",e.form,function(t){e.$refs.ruleForm.resetFields(),e.toastConfig.dialogVisible=!1,e.form={quartersEmp:"",actHours:"",unit:""},e.$message({type:"success",message:"编辑成功!"}),e.getList()},e)})},savaAgain:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$http.post(e.ports+"/midProduct/add",e.form,function(t){e.$message({type:"success",message:"新增成功!"}),e.$refs.ruleForm.resetFields(),e.toastConfig.dialogVisible=!0,e.getList()},e)})},select:function(e){this.selectData=e,1==e.length?this.toolbarConfig.btnStatus=[!1,!1,!1]:0==e.length?this.toolbarConfig.btnStatus=[!1,!0,!0]:this.toolbarConfig.btnStatus=[!1,!0,!1]},getList:function(){var e=this;this.$http.post(this.ports+"/midProduct/page",s()({pageNo:this.tableConfig.pageNo,pageSize:this.tableConfig.pageSize},this.searchData),function(t){console.log(e.searchData,"11111111"),e.tableData=t.items,e.tableConfig.total=t.numRows},this)},pageChange:function(){this.getList()},search:function(){this.tableConfig.pageNo=1,this.tableConfig.pageSize=20,this.getList()},see:function(e){this.viewForm=y()({},e),this.detailConfig.dialogVisible=!0}},mounted:function(){var e=this;this.getList(),this.$http.post(this.ports+"/midProduct/optionProductStorePlm",{},function(t){e.prodNos=t},this),this.$http.post(this.ports+"/midProduct/optionCrafworkStructPlm",{},function(t){console.log(t,"++++++"),e.productList=t},this)}},O={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"semiManufactures"},[a("search",{attrs:{data:e.searchData,config:e.searchConfig},on:{search:e.search}}),e._v(" "),a("toolbar",{attrs:{toolbarConfig:e.toolbarConfig},on:{handlerAdd:e.handlerAdd,handlerEdit:e.handlerEdit,handlerDel:e.handlerDel}}),e._v(" "),a("my-table",{attrs:{data:e.tableData,config:e.tableConfig},on:{pageChange:e.pageChange,select:e.select,see:e.see}}),e._v(" "),a("my-toast",{attrs:{config:e.toastConfig},on:{submit:e.submit,cancel:function(t){e.toastConfig.dialogVisible=!1,e.$refs.ruleForm.resetFields()},savaAgain:e.savaAgain}},[1==e.toastConfig.dialogVisible?a("el-form",{ref:"ruleForm",staticStyle:{"margin-right":"30px"},attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"产品信息",prop:"message"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择产品信息",size:"medium"},on:{change:e.handlerChange},model:{value:e.form.message,callback:function(t){e.$set(e.form,"message",t)},expression:"form.message"}},e._l(e.prodNos,function(e,t){return a("el-option",{key:t,attrs:{label:e.prodName+"-"+e.prodNo,value:e.prodNo+","+e.prodName}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"半产品编码",prop:"midProdNo"}},[a("el-input",{attrs:{disabled:0!=e.form.id,size:"medium"},model:{value:e.form.midProdNo,callback:function(t){e.$set(e.form,"midProdNo",t)},expression:"form.midProdNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计量单位",prop:"unit"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"参数",prop:"param"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.form.param,callback:function(t){e.$set(e.form,"param",t)},expression:"form.param"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"型号",prop:"modelDesc"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.form.modelDesc,callback:function(t){e.$set(e.form,"modelDesc",t)},expression:"form.modelDesc"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"规格",prop:"norms"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.form.norms,callback:function(t){e.$set(e.form,"norms",t)},expression:"form.norms"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1):e._e()],1),e._v(" "),a("my-toast",{attrs:{config:e.detailConfig},on:{cancel:function(t){e.detailConfig.dialogVisible=!1}}},[a("el-form",{ref:"ruleForm",staticStyle:{"margin-right":"30px"},attrs:{model:e.viewForm,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"产品信息:"}},[e._v("\n                        "+e._s(e.viewForm.prodName+"-"+e.viewForm.prodNo)+"\n                    ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"半产品编码:"}},[e._v("\n                        "+e._s(e.viewForm.midProdNo)+"\n                    ")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计量单位:"}},[e._v("\n                        "+e._s(e.viewForm.unit)+"\n                    ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"参数:"}},[e._v("\n                        "+e._s(e.viewForm.param)+"\n                    ")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"型号:"}},[e._v("\n                        "+e._s(e.viewForm.modelDesc)+"\n                    ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"规格:"}},[e._v("\n                        "+e._s(e.viewForm.norms)+"\n                    ")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:"}},[e._v("\n                "+e._s(e.viewForm.remark)+"\n            ")])],1)],1)],1)},staticRenderFns:[]};var E=a("vSla")(R,O,!1,function(e){a("8k8b")},null,null).exports,V={data:function(){return{rules:{crafworkId:C.require("string","请选择工艺名称"),crafworkDesc:[{required:!0,message:"请输入工艺要求",trigger:"blur"},{min:5,message:"请输入不小于五位数的字符",trigger:"blur"}]},crafworkList:[],selectData:{id:0},tableData:[],rootData:[{prodName:"产品列表",id:0}],toastConfig:{title:"添加工艺",dialogVisible:!1,width:"752px",btnData:[{isShow:!0,disabled:!1,name:"取消",method:"cancel"},{disabled:!1,isShow:!0,type:"primary",name:"确定",method:"submit"}]},paramSet:{title:"参数设置",dialogVisible:!1,width:"752px",btnData:[{isShow:!0,disabled:!1,name:"取消",method:"cancel"},{disabled:!1,isShow:!0,type:"primary",name:"确定",method:"submit"}]},paramList:[],paramConfig:{align:"center",isPage:!1,colConfig:[{field:"paramName",label:"参数名称",align:"center",type:"text"},{field:"values1",isResize:!0,label:"值1",align:"center",type:"input"},{field:"values2",isResize:!0,label:"值2",align:"center",type:"input"}]},form:{crafworkId:"",crafworkDesc:"",quartersEmp:"",carfSeq:"",amount:0,unit:""}}},computed:s()({},Object(r.d)(["ports"])),methods:{handlerChange:function(e){if(e){var t=this.crafworkList.findIndex(function(t){return t.id==e});console.log(this.crafworkList[t]),this.form.quartersEmp=this.crafworkList[t].quartersEmp,this.form.unit=this.crafworkList[t].unit}},move:function(e,t,a){var i=this,o=y()({},e);if(delete o.createTime,delete o.modifyTime,-1==a){var s=y()({},this.tableData[t-1]),r=o.carfSeq;if(o.carfSeq=s.carfSeq,s.carfSeq=r,delete s.createTime,delete s.modifyTime,0==t)return!1;this.$http.post_noqs(this.ports+"/prodCrafworkPlm/saveOrders",[o,s],function(e){i.getList()},this)}else if(1==a){s=y()({},this.tableData[t+1]),r=o.carfSeq;if(o.carfSeq=s.carfSeq,s.carfSeq=r,delete s.createTime,delete s.modifyTime,this.tableData.length-1==t)return!1;this.$http.post_noqs(this.ports+"/prodCrafworkPlm/saveOrders",[o,s],function(e){i.getList()},this)}},paramSubmit:function(){var e=this;this.$http.post_noqs(this.ports+"/prodCrafworkPlm/addParam",this.paramList,function(t){e.paramSet.dialogVisible=!1},this)},set:function(e,t){var a=this;this.$http.post(this.ports+"/prodCrafworkPlm/findParamByPId",{crafworkId:t.crafworkId},function(e){e.forEach(function(e){delete e.createTime,delete e.modifyTime}),a.paramList=e,a.paramSet.dialogVisible=!0},this)},loadNode:function(e,t,a){0==a?this.$http.post(this.ports+"/prodCrafworkPlm/findAllProduct",{},function(e){t(e)},this):e.level<3?this.$http.post(this.ports+"/prodCrafworkPlm/findAllMidProductByProductNo",{prodNo:e.data.prodNo},function(e){e.forEach(function(e){e.isLeaf=!0}),t(e)},this):t([])},nodeChange:function(e,t){this.selectData=t,t.midProdNo&&this.getList()},getList:function(){var e=this;this.$http.post(this.ports+"/prodCrafworkPlm/page",{midProdNo:this.selectData.midProdNo,prodNo:this.selectData.prodNo,pageNo:1,pageSize:1e5},function(t){e.tableData=t.items},this)},add:function(){this.toastConfig.title="新增产品工艺",this.form={crafworkId:"",crafworkDesc:"",quartersEmp:"",carfSeq:this.tableData.length<=0?1:this.tableData[this.tableData.length-1].carfSeq+1,amount:0,id:0,unit:"",midProdNo:this.selectData.midProdNo,prodNo:this.selectData.prodNo},this.toastConfig.dialogVisible=!0},edit:function(e,t){this.toastConfig.title="编辑产品工艺",this.form=t,this.toastConfig.dialogVisible=!0},del:function(e,t){var a=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.post(a.ports+"/prodCrafworkPlm/remove",{id:t.id,prodNo:a.selectData.prodNo,midProdNo:a.selectData.midProdNo},function(e){a.getList(),a.$message({type:"success",message:"删除成功!"})},a)})},submit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;0==e.form.id?e.$http.post(e.ports+"/prodCrafworkPlm/addNew",e.form,function(t){e.$refs.ruleForm.resetFields(),e.toastConfig.dialogVisible=!1,e.getList()},e):e.$http.post(e.ports+"/prodCrafworkPlm/update",e.form,function(t){e.$refs.ruleForm.resetFields(),e.toastConfig.dialogVisible=!1,e.getList()},e)})},savaAgain:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$http.post(e.ports+"/productStorePlm/addProduct",e.form,function(t){e.$refs.ruleForm.resetFields(),e.toastConfig.dialogVisible=!0,e.getList()},e)})}},mounted:function(){var e=this;this.$http.post(this.ports+"/prodCrafworkPlm/optionCraf",{},function(t){e.crafworkList=t},this)}},T={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"productProcess"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"treeBox no-scroll",staticStyle:{overflow:"auto"}},[a("tree",{attrs:{readOnly:!0,rootData:e.rootData,props:{label:"prodName",isLeaf:"isLeaf"}},on:{loadNode:e.loadNode,nodeChange:e.nodeChange}})],1)]),e._v(" "),a("el-col",{staticStyle:{"max-height":"432px"},attrs:{span:18}},[e.selectData.midProdNo?a("div",{staticClass:"tableBox no-scroll"},[a("h2",[e._v(e._s(e.selectData.parentName)+"/"+e._s(e.selectData.midProdNo))]),e._v(" "),a("div",{staticClass:"productDetail"},[a("span",[e._v("产品编码:"+e._s(e.selectData.prodNo))]),e._v(" "),a("span",[e._v("产品名称:"+e._s(e.selectData.parentName))]),e._v(" "),a("span",[e._v("半成品编码:"+e._s(e.selectData.midProdNo))]),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"medium"},on:{click:e.add}},[e._v("添加工艺")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small",height:"400px"}},[a("el-table-column",{attrs:{label:"工艺名称",align:"center","show-overflow-tooltip":"",prop:"crafworkName"}}),e._v(" "),a("el-table-column",{attrs:{label:"工艺需求","show-overflow-tooltip":"",align:"center",prop:"crafworkDesc"}}),e._v(" "),a("el-table-column",{attrs:{label:"工艺岗位","show-overflow-tooltip":"",align:"center",prop:"quartersEmp"}}),e._v(" "),a("el-table-column",{attrs:{label:"前置工艺","show-overflow-tooltip":"",align:"center",prop:"befCrafwork"}}),e._v(" "),a("el-table-column",{attrs:{label:"工艺顺序",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("顺序"),a("span",{staticClass:"caret-wrapper"},[a("i",{staticClass:"sort-caret ascending",class:{isDisabled:0==t.$index},on:{click:function(a){e.move(t.row,t.$index,-1)}}}),e._v(" "),a("i",{staticClass:"sort-caret descending",class:{isDisabled:t.$index==e.tableData.length-1},on:{click:function(a){e.move(t.row,t.$index,1)}}})])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"计量单位",align:"center","show-overflow-tooltip":"",prop:"unit"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.set(t.$index,t.row)}}},[e._v("设置参数值")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.edit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.del(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1):a("div",{staticClass:"tableBox no-scroll"},[a("p",[e._v("请先选择半成品")])])])],1),e._v(" "),a("my-toast",{attrs:{config:e.toastConfig},on:{submit:e.submit,cancel:function(t){e.toastConfig.dialogVisible=!1,e.$refs.ruleForm.resetFields()},savaAgain:e.savaAgain}},[1==e.toastConfig.dialogVisible?a("el-form",{ref:"ruleForm",staticStyle:{"margin-right":"30px"},attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"工艺名称",prop:"crafworkId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"medium"},on:{change:e.handlerChange},model:{value:e.form.crafworkId,callback:function(t){e.$set(e.form,"crafworkId",t)},expression:"form.crafworkId"}},e._l(e.crafworkList,function(e,t){return a("el-option",{key:t,attrs:{label:e.crafworkName,value:e.id}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"工艺要求",prop:"crafworkDesc"}},[a("el-input",{attrs:{size:"medium",placeholder:"请输入不小于五位数的字符"},model:{value:e.form.crafworkDesc,callback:function(t){e.$set(e.form,"crafworkDesc",t)},expression:"form.crafworkDesc"}})],1)],1)],1),e._v(" "),a("el-row",[""!=e.form.crafworkId?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"工艺岗位"}},[e._v("\n                        "+e._s(e.form.quartersEmp)+"\n                        ")])],1):e._e(),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"构成数量"}},[a("el-input-number",{attrs:{min:1,controls:!1,size:"medium"},model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",t)},expression:"form.amount"}})],1)],1)],1),e._v(" "),a("el-row",[""!=e.form.crafworkId?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计量单位"}},[e._v("\n                        "+e._s(e.form.unit)+"\n                    ")])],1):e._e()],1)],1):e._e()],1),e._v(" "),a("my-toast",{attrs:{config:e.paramSet},on:{cancel:function(t){e.paramSet.dialogVisible=!1},submit:e.paramSubmit}},[a("my-table",{staticStyle:{padding:"0 20px"},attrs:{data:e.paramList,config:e.paramConfig}})],1)],1)},staticRenderFns:[]};var P=a("vSla")(V,T,!1,function(e){a("4aqK")},null,null).exports,M={data:function(){return{operateType:"",productList:[],orders:[],customs:[],detailList:[],initDetail:[],initForm:{},orgList:[],searchData:{},searchConfig:[[{label:"内部订单号",field:"insideOrder",type:"input",placeholder:"请输入姓名"},{label:"客户信息",field:"custom",type:"input",placeholder:"请输入客户信息"},{label:"订单号",field:"orderNo",type:"input",placeholder:"请输入订单号"}],[{label:"订单状态",field:"orderStatus",type:"select",placeholder:"请输入姓名",childrens:[{name:"审批中",value:"AS002"},{name:"已通过",value:"AS001"},{name:"已驳回",value:"AS003"}]},{label:"下单日期",field:"dateTime",type:"daterange",placeholder:"请输入手机号码"}]],tableData:[1],tableConfig:{isHigh:!1,isSelection:!0,align:"center",isPage:!0,pageNo:1,pageSize:20,total:0,colConfig:[{fixed:!1,field:"orderSourceLabel",width:"",isSort:!1,isResize:!0,label:"订单来源",align:"center",type:"text"},{fixed:!1,field:"insideOrder",width:"",isSort:!1,isResize:!0,label:"内部订单号",align:"center",type:"text"},{fixed:!1,field:"customName",width:"",isSort:!1,isResize:!0,label:"客户信息",align:"center",type:"text"},{fixed:!1,field:"orderNo",width:"",isSort:!1,isResize:!0,label:"订单号",align:"center",type:"text"},{fixed:!1,field:"voucherDate",width:"",isSort:!1,isResize:!0,label:"下单日期",align:"center",type:"text"},{fixed:!1,field:"firstDate",width:"",isSort:!1,isResize:!0,label:"交图日期",align:"center",type:"text"},{fixed:!1,field:"orgName",width:"",isSort:!1,isResize:!0,label:"生产部门",align:"center",type:"text"},{fixed:!1,field:"orderStatusLabel",width:"",isSort:!1,isResize:!0,label:"订单状态",align:"center",type:"text"},{fixed:!1,width:"",isSort:!1,isResize:!0,label:"操作",align:"center",type:"button",btnData:[{name:"订单明细",method:"see"},{name:"删除",method:"del",color:"#F6463B"}]}]},toolbarConfig:{custom:[{icon:"plus",type:"primary",method:"handlerAdd",name:"新增"},{icon:"edit",type:"",method:"handlerEdit",name:"编辑"},{icon:"delete",type:"",method:"handlerDel",name:"删除"}],btnStatus:[!1,!0,!0]},toastConfig:{title:"新增订单",dialogVisible:!1,width:"640px",btnData:[{disabled:!1,isShow:!0,type:"primary",name:"关闭",method:"cancel"},{disabled:!1,isShow:!0,type:"primary",name:"确定",method:"submit"}]},form:{orderSourceId:"",customNo:"",orderNo:"",firstDate:"",orgId:"",voucherDate:"",insideOrder:""},rules:{orderSourceId:C.require("number","请选择订单来源"),customNo:C.require("string","请选择客户信息"),orderNo:C.require("string","请选择订单号"),firstDate:C.require("string","请选择交图时间"),voucherDate:C.require("string","请选择下单时间"),insideOrder:C.require("string","请输入内部订单"),orgId:C.require("number","请选择生产部门")},selectData:[]}},computed:s()({},Object(r.d)(["ports"]),{customShow:function(){return""!=this.form.orderSourceId},orderShow:function(){return 1==this.form.orderSourceId&&""!=this.form.customNo},otherShow:function(){return 1==this.form.orderSourceId?""!=this.form.customNo&&""!=this.form.orderNo:""!=this.form.customNo}}),methods:{handlerDel:function(){var e=[],t=!0,a=!1,i=void 0;try{for(var o,s=w()(this.selectData);!(t=(o=s.next()).done);t=!0){var r=o.value;e.push(r.voucherNo)}}catch(e){a=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw i}}this.toDel(e)},toDel:function(e){var t=this;this.$confirm("此操作将永久删除该订单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.post(t.ports+"/produceOrderAps/delete",{voucherNos:e.join(",")},function(e){t.$message({type:"success",message:"删除成功!"}),t.getList()},t)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},del:function(e){this.toDel([e.voucherNo])},see:function(e){var t=this;this.toastConfig.btnData[1].isShow=!1,this.operateType="see",this.toastConfig.title="订单明细",this.$http.post(this.ports+"/produceOrderAps/getDetailByVoucherNo",{voucherNo:e.voucherNo},function(a){console.log(a),t.form={orderSourceId:a.orderSourceId,customNo:a.customNo,orderNo:a.orderNo,firstDate:a.firstDate,orgId:a.orgId,voucherDate:a.voucherDate,insideOrder:a.insideOrder,id:e.id,voucherNo:e.voucherNo},t.detailList=a.produceOrderDetailApsDtos,t.toastConfig.dialogVisible=!0},this)},handlerEdit:function(){var e=this;if(console.log(this.selectData[0]),"已通过"==this.selectData[0].orderStatusLabel||"审核中"==this.selectData[0].orderStatusLabel)return this.$message({type:"error",message:"无法修改正在审核和审核完成的数据"});this.toastConfig.btnData[1].isShow=!0,this.operateType="edit",this.toastConfig.title="编辑订单",this.$http.post(this.ports+"/produceOrderAps/getDetailByVoucherNo",{voucherNo:this.selectData[0].voucherNo},function(t){console.log(t),e.form={orderSourceId:t.orderSourceId,customNo:t.customNo,orderNo:t.orderNo,firstDate:t.firstDate,orgId:t.orgId,voucherDate:t.voucherDate,insideOrder:t.insideOrder,id:e.selectData[0].id,voucherNo:e.selectData[0].voucherNo},e.detailList=t.produceOrderDetailApsDtos,1!=e.form.orderSourceId&&(e.detailList=t.produceOrderDetailApsDtos.concat([{prodNo:"",amount:0}]));var a=e.customs.findIndex(function(t){return t.customNo==e.form.customNo}),i=e.customs[a].id;e.$http.post(e.ports+"/orderDoc/listByCustomIdInCrm",{customId:i},function(t){e.orders=t,e.toastConfig.dialogVisible=!0},e)},this)},handlerSubmit:function(){var e=this,t=JSON.parse(f()(this.detailList));1!=this.form.orderSourceId&&t.splice(t.length-1,1),this.$refs.ruleForm.validate(function(a){if(!a)return console.log("error submit!!"),!1;"add"==e.operateType?e.$http.post_noqs(e.ports+"/produceOrderAps/save",s()({},e.form,{produceOrderDetailApsDtos:t}),function(t){e.toastConfig.dialogVisible=!1,e.$message({type:"success",message:"新增成功"}),e.getList()},e):e.$http.post_noqs(e.ports+"/produceOrderAps/update",s()({},e.form,{produceOrderDetailApsDtos:t}),function(t){e.toastConfig.dialogVisible=!1,e.getList(),e.$message({type:"success",message:"编辑成功"})},e)})},handlerProdNoChange:function(e){e==this.detailList.length-1&&(this.detailList=this.detailList.concat([{prodNo:"",amount:0}]))},handleOpen:function(){this.initDetail=JSON.parse(f()(this.detailList)),this.initForm=JSON.parse(f()(this.form))},handlerOrderChange:function(e){var t=this;if(this.detailList=[],this.form.voucherDate="",this.form.firstDate="",""!=e){var a=this.orders.findIndex(function(t){return t.orderNo==e});this.$http.post(this.ports+"/orderDoc/getByIdInCrm",{id:this.orders[a].id},function(e){console.log(e.firstDate),t.detailList=e.orderDetailCrmDtos,t.form.voucherDate=e.voucherDate,t.form.firstDate=e.firstDate},this)}},handlerChange:function(e){var t=this,a=this.customs.findIndex(function(t){return t.customNo==e});console.log(a,this.customs[a]);var i=this.customs[a].id;this.$http.post(this.ports+"/orderDoc/listByCustomIdInCrm",{customId:i},function(a){t.initForm.customNo==e?(t.form.orderNo=t.initForm.orderNo,t.detailList=t.initDetail,t.form.voucherDate=t.initForm.voucherDate,t.form.firstDate=t.initForm.firstDate,t.detailList=1!=e?t.initDetail.concat([{prodNo:"",amount:0}]):t.initDetail):(t.form.orderNo="",t.detailList=[],t.form.voucherDate="",t.form.firstDate="",t.detailList=1!=e?[{prodNo:"",amount:0}]:[]),t.orders=a},this)},orderSourceChange:function(e){this.initForm.orderSourceId==e?(this.form.customNo=this.initForm.customNo,this.form.orderNo=this.initForm.orderNo,this.detailList=this.initDetail,this.form.voucherDate=this.initForm.voucherDate,this.form.firstDate=this.initForm.firstDate,this.detailList=1!=e?this.initDetail.concat([{prodNo:"",amount:0}]):this.initDetail):(this.form.orderNo="",this.form.voucherDate="",this.form.firstDate="",this.form.customNo="",this.detailList=1!=e?[{prodNo:"",amount:0}]:[])},handlerAdd:function(){this.toastConfig.btnData[1].isShow=!0,this.operateType="add",this.toastConfig.title="新增订单",this.toastConfig.dialogVisible=!0,this.form={orderSourceId:"",customNo:"",orderNo:"",firstDate:"",orgId:"",voucherDate:""},this.detailList=[]},search:function(){this.tableConfig.pageNo=1,this.tableConfig.pageSize=20,this.getList()},pageChange:function(){this.getList()},handlerSelect:function(e){this.selectData=e,0==e.length?this.toolbarConfig.btnStatus=[!1,!0,!0]:1==e.length?this.toolbarConfig.btnStatus=[!1,!1,!1]:this.toolbarConfig.btnStatus=[!1,!0,!1]},getList:function(){var e=this,t=y()({},this.searchData);t.dateTime&&(t.voucherDateFrom=t.dateTime[0],t.voucherDateTo=t.dateTime[1]),delete t.dateTime,this.$http.post(this.ports+"/produceOrderAps/list",s()({},t,{pageNo:this.tableConfig.pageNo,pageSize:this.tableConfig.pageSize}),function(t){e.tableData=t.items,e.tableConfig.total=t.numRows},this)}},mounted:function(){var e=this;this.getList(),this.$http.post(this.ports+"/custom/listInCrm",{},function(t){e.customs=t},this),this.$http.post(this.ports+"/casOrg/listInHcm",{},function(t){console.log(t),e.orgList=t},this),this.$http.post(this.ports+"/productStorePlm/listForQueryCriteria",{},function(t){e.productList=t},this)}},q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"technology"},[a("search",{attrs:{data:e.searchData,config:e.searchConfig},on:{search:e.search}}),e._v(" "),a("toolbar",{attrs:{toolbarConfig:e.toolbarConfig},on:{handlerAdd:e.handlerAdd,handlerEdit:e.handlerEdit,handlerDel:e.handlerDel}}),e._v(" "),a("my-table",{attrs:{data:e.tableData,config:e.tableConfig},on:{select:e.handlerSelect,pageChange:e.pageChange,see:e.see,del:e.del}}),e._v(" "),a("my-toast",{attrs:{config:e.toastConfig},on:{handleOpen:e.handleOpen,submit:e.handlerSubmit,cancel:function(t){e.toastConfig.dialogVisible=!1}}},[1==e.toastConfig.dialogVisible?a("el-form",{ref:"ruleForm",staticStyle:{"margin-right":"30px"},attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"订单来源",prop:"orderSourceId"}},[a("el-select",{attrs:{disabled:"edit"==e.operateType||"see"==e.operateType,placeholder:"请选择订单来源",size:"small"},on:{change:e.orderSourceChange},model:{value:e.form.orderSourceId,callback:function(t){e.$set(e.form,"orderSourceId",t)},expression:"form.orderSourceId"}},[a("el-option",{attrs:{label:"销售订单",value:1}}),e._v(" "),a("el-option",{attrs:{label:"销售预测",value:2}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"内部订单号",prop:"insideOrder"}},[a("el-input",{attrs:{disabled:"edit"==e.operateType||"see"==e.operateType,size:"small",placeholder:"请输入内部订单号"},model:{value:e.form.insideOrder,callback:function(t){e.$set(e.form,"insideOrder",t)},expression:"form.insideOrder"}})],1)],1),e._v(" "),a("transition",{attrs:{name:"el-zoom-in-top"}},[e.customShow?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"客户信息",prop:"customNo"}},[a("el-select",{attrs:{placeholder:"请选择客户信息",size:"small",disabled:"see"==e.operateType},on:{change:e.handlerChange},model:{value:e.form.customNo,callback:function(t){e.$set(e.form,"customNo",t)},expression:"form.customNo"}},e._l(e.customs,function(e){return a("el-option",{key:e.value,attrs:{label:e.customName,value:e.customNo}})}))],1)],1):e._e()],1),e._v(" "),a("transition",{attrs:{name:"el-zoom-in-top"}},[e.orderShow?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"订单号",prop:"orderNo"}},[a("el-select",{attrs:{placeholder:"请选择订单号",size:"small",disabled:"see"==e.operateType},on:{change:e.handlerOrderChange},model:{value:e.form.orderNo,callback:function(t){e.$set(e.form,"orderNo",t)},expression:"form.orderNo"}},e._l(e.orders,function(e){return a("el-option",{key:e.orderNo,attrs:{label:e.orderNo,value:e.orderNo}})}))],1)],1):e._e()],1),e._v(" "),a("transition",{attrs:{name:"el-zoom-in-top"}},[e.otherShow?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"下单日期",prop:"voucherDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:""!=e.form.orderNo||"see"==e.operateType,size:"small","value-format":"yyyy-MM-dd",placeholder:"请输入下单日期"},model:{value:e.form.voucherDate,callback:function(t){e.$set(e.form,"voucherDate",t)},expression:"form.voucherDate"}})],1)],1):e._e()],1),e._v(" "),a("el-col",{attrs:{span:4}}),e._v(" "),a("transition",{attrs:{name:"el-zoom-in-top"}},[e.otherShow?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"交图日期",prop:"firstDate"}},[a("el-date-picker",{staticStyle:{width:"205px"},attrs:{disabled:""!=e.form.orderNo||"see"==e.operateType,size:"small","value-format":"yyyy-MM-dd",placeholder:"请输入交图日期"},model:{value:e.form.firstDate,callback:function(t){e.$set(e.form,"firstDate",t)},expression:"form.firstDate"}})],1)],1):e._e()],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"生产部门",prop:"orgId"}},[a("el-select",{attrs:{disabled:"see"==e.operateType,placeholder:"请选择生产部门",size:"small"},model:{value:e.form.orgId,callback:function(t){e.$set(e.form,"orgId",t)},expression:"form.orgId"}},e._l(e.orgList,function(e){return a("el-option",{key:e.value,attrs:{label:e.orgName,value:e.id}})}))],1)],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"myTable",staticStyle:{width:"100%",padding:"20px","box-sizing":"border-box"}},[a("el-table",{attrs:{data:e.detailList}},[a("el-table-column",{attrs:{prop:"prodName",label:"产品信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==e.form.orderSourceId||"see"==e.operateType?a("span",[e._v(e._s(t.row.prodName))]):a("el-select",{attrs:{size:"medium"},on:{change:function(a){e.handlerProdNoChange(t.$index)}},model:{value:t.row.prodNo,callback:function(a){e.$set(t.row,"prodNo",a)},expression:"scope.row.prodNo"}},e._l(e.productList,function(e){return a("el-option",{key:e.prodNo,attrs:{label:e.prodName,value:e.prodNo}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==e.form.orderSourceId||"see"==e.operateType?a("span",[e._v(e._s(t.row.amount))]):a("el-input-number",{attrs:{min:0,size:"medium"},model:{value:t.row.amount,callback:function(a){e.$set(t.row,"amount",a)},expression:"scope.row.amount"}})]}}])}),e._v(" "),"see"==e.operateType?a("el-table-column",{attrs:{label:"已交货数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==e.form.orderSourceId||"see"==e.operateType?a("span",[e._v(e._s(t.row.okAmount))]):a("el-input-number",{attrs:{min:1,size:"medium"},model:{value:t.row.okAmount,callback:function(a){e.$set(t.row,"okAmount",a)},expression:"scope.row.okAmount"}})]}}])}):e._e()],1)],1)],1)],1)},staticRenderFns:[]};var H=a("vSla")(M,q,!1,function(e){a("+pt3")},null,null).exports,U={data:function(){return{userList:[],selectData:[],rules:{price:C.require("number","工艺名称不能为空"),doEmpNo:C.require("string","请选择工艺执行人"),planDate:C.require("string","请选择计划开始时间"),planHours:C.require("number","计划工时不能为空"),actDate:C.require("string","请选择实际开始时间")},searchData:{},searchConfig:[[{label:"内部订单号",field:"insideOrder",type:"input",placeholder:"请输入内部订单号"},{label:"产品信息",field:"prodName",type:"input",placeholder:"请输入产品信息"},{label:"任务状态",field:"status",type:"select",placeholder:"请输入姓名",childrens:[{name:"待派工",value:"0"},{name:"处理中",value:"1"},{name:"已完成",value:"2"},{name:"审核未通过",value:"3"}]}]],toolbarConfig:{custom:[{type:"primary",method:"setPrice",name:"设置工艺价格"}],btnStatus:[!0]},tableData:[],tableConfig:{isHigh:!1,isSelection:!0,align:"center",isPage:!0,pageNo:1,pageSize:20,total:0,colConfig:[{fixed:!1,field:"insideOrder",width:"",isSort:!1,isResize:!0,label:"内部订单号",align:"center",type:"text"},{fixed:!1,field:"prodName",width:"",isSort:!1,isResize:!0,label:"产品信息",align:"center",type:"text"},{fixed:!1,field:"crafworkName",width:"",isSort:!1,isResize:!0,label:"工艺名称",align:"center",type:"text"},{fixed:!1,field:"price",width:"",isSort:!1,isResize:!0,label:"工艺工价",align:"center",type:"text"},{fixed:!1,field:"doEmpName",width:"",isSort:!1,isResize:!0,label:"工艺执行人",align:"center",type:"text"},{fixed:!1,field:"amount",width:"",isSort:!1,isResize:!0,label:"数量",align:"center",type:"text"},{fixed:!1,field:"planDate",width:"",isSort:!1,isResize:!0,label:"计划开始时间",align:"center",type:"text"},{fixed:!1,field:"actDate",width:"120",isSort:!1,isResize:!0,label:"实际开始时间",align:"center",type:"text"},{fixed:!1,field:"getTime",isSort:!1,isResize:!0,label:"领派工时间",align:"center",type:"text"},{fixed:!1,field:"crafworkStandHours",width:"",isSort:!1,isResize:!0,label:"标准工时",align:"center",type:"text"},{fixed:!1,field:"planHours",width:"",isSort:!1,isResize:!0,label:"计划工时",align:"center",type:"text"},{fixed:!1,field:"statusName",width:"",isSort:!1,isResize:!0,label:"任务状态",align:"center",type:"text"},{fixed:!1,width:"",isSort:!1,isResize:!0,label:"操作",align:"center",type:"button",btnData:[{name:"任务分配",method:"tasking"}]}]},toastConfig:{title:"任务分配",dialogVisible:!1,width:"560px",btnData:[{isShow:!0,disabled:!1,name:"取消",method:"cancel"},{disabled:!1,isShow:!0,type:"primary",name:"确定",method:"submit"}]},form:{}}},computed:s()({},Object(r.d)(["ports"])),methods:{getList:function(){var e=this;this.$http.post(this.ports+"/taskPondMes/listForDistributeTask",s()({pageSize:this.tableConfig.pageSize,pageNo:this.tableConfig.pageNo},this.searchData),function(t){e.tableData=t.items,e.tableConfig.total=t.numRows},this)},handlerSearch:function(){this.tableConfig.pageNo=1,this.tableConfig.pageSize=20,this.getList()},setPrice:function(){var e=this;this.$prompt("工艺工价","请输入工艺工价",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[1-9]\d*(\.\d+)?$/,inputErrorMessage:"请输入工艺工价"}).then(function(t){var a=t.value,i=[],o=!0,s=!1,r=void 0;try{for(var l,n=w()(e.selectData);!(o=(l=n.next()).done);o=!0){var c=l.value;i.push(c.id)}}catch(e){s=!0,r=e}finally{try{!o&&n.return&&n.return()}finally{if(s)throw r}}e.$http.post(e.ports+"/taskPondMes/setTaskPrice",{taskPondIds:i.join(","),price:a},function(t){e.getList()},e)}).catch(function(){e.$message({type:"info",message:"取消输入"})})},select:function(e){this.selectData=e,e.length>=1?this.toolbarConfig.btnStatus=[!1]:this.toolbarConfig.btnStatus=[!0]},submit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$http.post_noqs(e.ports+"/taskPondMes/distributeTask",e.form,function(t){e.$refs.ruleForm.resetFields(),e.dialogVisible=!0,e.$message({type:"success",message:"任务分配成功"}),e.toastConfig.dialogVisible=!1,e.getList()},e)})},tasking:function(e){var t=this;if(0!=e.status)return this.$message.error("任务不可分配，请确认任务是否已被领取或已经分配");this.form=y()({},e),this.$http.post(this.ports+"/empfloderHcm/getByTaskPondId",{taskPondId:e.id},function(e){console.log(e),t.userList=e,t.toastConfig.dialogVisible=!0},this)},pageChange:function(){console.log("111"),this.getList()}},mounted:function(){this.getList()}},B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tasking"},[a("search",{attrs:{data:e.searchData,config:e.searchConfig},on:{search:e.handlerSearch}}),e._v(" "),a("toolbar",{attrs:{toolbarConfig:e.toolbarConfig},on:{setPrice:e.setPrice}}),e._v(" "),a("my-table",{attrs:{data:e.tableData,config:e.tableConfig},on:{pageChange:e.pageChange,tasking:e.tasking,select:e.select}}),e._v(" "),a("my-toast",{attrs:{config:e.toastConfig},on:{submit:e.submit,cancel:function(t){e.toastConfig.dialogVisible=!1,e.$refs.ruleForm.resetFields()},handleClose:function(t){e.$refs.ruleForm.resetFields()}}},[a("el-form",{ref:"ruleForm",staticStyle:{margin:"0 20px"},attrs:{model:e.form,rules:e.rules,"label-width":"110px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"内部订单号"}},[a("span",[e._v(e._s(e.form.insideOrder))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品信息"}},[a("span",[e._v(e._s(e.form.prodName))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"工艺名称"}},[a("span",[e._v(e._s(e.form.crafworkName))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"工艺工价",prop:"price"}},[a("el-input-number",{attrs:{min:0,controls:!1,size:"small"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"工艺执行人",prop:"doEmpNo"}},[a("el-select",{attrs:{size:"small",placeholder:""},model:{value:e.form.doEmpNo,callback:function(t){e.$set(e.form,"doEmpNo",t)},expression:"form.doEmpNo"}},e._l(e.userList,function(e){return a("el-option",{key:e.doEmpNo,attrs:{label:e.empName,value:e.empNo}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数量"}},[a("span",[e._v(e._s(e.form.amount))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计划开始时间",prop:"planDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",size:"small",placeholder:"选择计划开始时间"},model:{value:e.form.planDate,callback:function(t){e.$set(e.form,"planDate",t)},expression:"form.planDate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计划工时",prop:"planHours"}},[a("el-input-number",{attrs:{min:0,controls:!1,size:"small"},model:{value:e.form.planHours,callback:function(t){e.$set(e.form,"planHours",t)},expression:"form.planHours"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"实际开始时间",prop:"actDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",size:"small",placeholder:"选择计划开始时间"},model:{value:e.form.actDate,callback:function(t){e.$set(e.form,"actDate",t)},expression:"form.actDate"}})],1)],1)],1)],1)},staticRenderFns:[]};var j=a("vSla")(U,B,!1,function(e){a("Fc3Z")},null,null).exports,J={data:function(){return{userList:[],selectData:[],rules:{price:C.require("number","工艺名称不能为空"),doEmpNo:C.require("string","请选择工艺执行人"),planDate:C.require("string","请选择计划开始时间"),planHours:C.require("number","计划工时不能为空"),actDate:C.require("string","请选择实际开始时间")},searchData:{},searchConfig:[[{label:"内部订单号",field:"insideOrder",type:"input",placeholder:"请输入内部订单号"},{label:"产品信息",field:"prodName",type:"input",placeholder:"请输入产品信息"},{label:"任务状态",field:"status",type:"select",placeholder:"请输入姓名",childrens:[{name:"待派工",value:"0"},{name:"处理中",value:"1"},{name:"已完成",value:"2"},{name:"审核未通过",value:"3"}]}]],tableData:[],tableConfig:{isHigh:!1,isSelection:!0,align:"center",isPage:!0,pageNo:1,pageSize:20,total:0,colConfig:[{fixed:!1,field:"insideOrder",width:"",isSort:!1,isResize:!0,label:"内部订单号",align:"center",type:"text"},{fixed:!1,field:"prodName",width:"",isSort:!1,isResize:!0,label:"产品信息",align:"center",type:"text"},{fixed:!1,field:"crafworkName",width:"",isSort:!1,isResize:!0,label:"工艺名称",align:"center",type:"text"},{fixed:!1,field:"price",width:"",isSort:!1,isResize:!0,label:"工艺工价",align:"center",type:"text"},{fixed:!1,field:"doEmpName",width:"",isSort:!1,isResize:!0,label:"工艺执行人",align:"center",type:"text"},{fixed:!1,field:"amount",width:"",isSort:!1,isResize:!0,label:"数量",align:"center",type:"text"},{fixed:!1,field:"planDate",width:"",isSort:!1,isResize:!0,label:"计划开始时间",align:"center",type:"text"},{fixed:!1,field:"actDate",width:"120",isSort:!1,isResize:!0,label:"实际开始时间",align:"center",type:"text"},{fixed:!1,field:"getTime",isSort:!1,isResize:!0,label:"领派工时间",align:"center",type:"text"},{fixed:!1,field:"crafworkStandHours",width:"",isSort:!1,isResize:!0,label:"标准工时",align:"center",type:"text"},{fixed:!1,field:"planHours",width:"",isSort:!1,isResize:!0,label:"计划工时",align:"center",type:"text"},{fixed:!1,field:"statusName",width:"",isSort:!1,isResize:!0,label:"任务状态",align:"center",type:"text"},{fixed:!1,width:"",isSort:!1,isResize:!0,label:"操作",align:"center",type:"button",btnData:[{name:"任务领取",method:"receive"}]}]},toastConfig:{title:"任务领取",dialogVisible:!1,width:"560px",btnData:[{isShow:!0,disabled:!1,name:"取消",method:"cancel"},{disabled:!1,isShow:!0,type:"primary",name:"确定",method:"submit"}]},form:{}}},computed:s()({},Object(r.d)(["ports"])),methods:{getList:function(){var e=this;this.$http.post(this.ports+"/taskPondMes/listForDrawTask",s()({pageSize:this.tableConfig.pageSize,pageNo:this.tableConfig.pageNo},this.searchData),function(t){e.tableData=t.items,e.tableConfig.total=t.numRows},this)},handlerSearch:function(){this.tableConfig.pageNo=1,this.tableConfig.pageSize=20,this.getList()},submit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$http.post_noqs(e.ports+"/taskPondMes/drawTask",e.form,function(t){e.$refs.ruleForm.resetFields(),e.dialogVisible=!0,e.$message({type:"success",message:"任务领取成功"}),e.toastConfig.dialogVisible=!1,e.getList()},e)})},receive:function(e){if(0!=e.status)return this.$message.error("任务不可领取，请确认任务是否已被领取或已经分配");this.form=y()({},e),this.toastConfig.dialogVisible=!0},pageChange:function(){console.log("111"),this.getList()}},mounted:function(){this.getList()}},Q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"receive"},[a("search",{attrs:{data:e.searchData,config:e.searchConfig},on:{search:e.handlerSearch}}),e._v(" "),a("my-table",{attrs:{data:e.tableData,config:e.tableConfig},on:{pageChange:e.pageChange,receive:e.receive}}),e._v(" "),a("my-toast",{attrs:{config:e.toastConfig},on:{submit:e.submit,cancel:function(t){e.toastConfig.dialogVisible=!1,e.$refs.ruleForm.resetFields()}}},[a("el-form",{ref:"ruleForm",staticStyle:{margin:"0 20px"},attrs:{model:e.form,rules:e.rules,"label-width":"110px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"内部订单号"}},[a("span",[e._v(e._s(e.form.insideOrder))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品信息"}},[a("span",[e._v(e._s(e.form.prodName))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数量"}},[a("span",[e._v(e._s(e.form.amount))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"工艺名称"}},[a("span",[e._v(e._s(e.form.crafworkName))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计划开始时间",prop:"planDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",size:"small",placeholder:"选择计划开始时间"},model:{value:e.form.planDate,callback:function(t){e.$set(e.form,"planDate",t)},expression:"form.planDate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计划工时",prop:"planHours"}},[a("el-input-number",{attrs:{min:0,controls:!1,size:"small"},model:{value:e.form.planHours,callback:function(t){e.$set(e.form,"planHours",t)},expression:"form.planHours"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"实际开始时间",prop:"actDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",size:"small",placeholder:"选择计划开始时间"},model:{value:e.form.actDate,callback:function(t){e.$set(e.form,"actDate",t)},expression:"form.actDate"}})],1)],1)],1)],1)},staticRenderFns:[]};var K=a("vSla")(J,Q,!1,function(e){a("nl6p")},null,null).exports,Z=a("aozt"),W=a.n(Z),Y={get:function(e,t,a,i){W.a.get(e,{params:t}).then(function(e){var t=e.data;if(t.result){if(a)try{a(t.data)}catch(e){console.log(e)}}else i?i.$alert(t.message,"错误提示",{confirmButtonText:"确定"}):alert(t.message)})},put:function(e,t,i,o){a("6iV/");W.a.put(e,t,{params:{}}).then(function(e){var t=e.data;if(t.result){if(i)try{i(t.data)}catch(e){console.log(e)}}else o?o.$alert(t.message,"错误提示",{confirmButtonText:"确定"}):alert(t.message)})},delete:function(e,t,i,o){var s=a("6iV/");W.a.delete(e,{data:s.stringify(t)}).then(function(e){var t=e.data;if(t.result){if(i)try{i(t.data)}catch(e){console.log(e)}}else o?o.$alert(t.message,"错误提示",{confirmButtonText:"确定"}):alert(t.message)})},post:function(e,t,i,o){var s=a("6iV/");console.log(t),W.a.post(e,s.stringify(t),{params:{}}).then(function(e){var t=e.data;if(t.result){if(i)try{i(t.model)}catch(e){console.log(e)}}else o?o.$alert(t.message,"错误提示",{confirmButtonText:"确定"}):alert(t.message)})},post_noqs:function(e,t,a,i){W.a.post(e,t,{params:{}}).then(function(e){var t=e.data;if(t.result){if(a)try{a(t.model)}catch(e){console.log(e)}}else i?i.$alert(t.message,"错误提示",{confirmButtonText:"确定"}):alert(t.message)})}},G=function(){return sessionStorage.getItem("ports")},X=function(e){Y.post(G()+"/pictMess/pictDetail",e.params,e.success,e.Vue)},ee={data:function(){return{testlist:[],imageUrl:"",sureForm:{insideOrder:"",prodNo:"",prodMess:"",crafworkName:"",crafworkId:"",doEmpName:"",sendEmp:"",okDatetime:"",pictureUrls:[],actHours:1,desc:""},sureRules:{actHours:[{required:!0,type:"number",message:"此选择由最多7位整数加1位小数组成",trigger:["input","change","blur"]}],okDatetime:[{required:!0,message:"请选择完工日期",trigger:["input","change","blur"]}]},uploadPath:"http://61.153.187.80:8081/fileSystem/uploadFile",emptySrc:"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",detailData:{},detailData2:{},sureData:[],deleteArr:[],selectData:[],rules:{},searchData:{},searchConfig:[[{label:"内部订单号",field:"insideOrder",filterable:!0,type:"select",placeholder:"请输入/选择内部订单号",childrens:[]},{label:"产品信息",field:"prodMess",type:"input",placeholder:"请输入手机号码"},{label:"确认状态",field:"isCheck",type:"select",placeholder:"请选择确认状态",childrens:[{name:"已完工",value:!0},{name:"制作中",value:!1}]}]],tableData:[],tableConfig:{isHigh:!1,isSelection:!0,align:"center",loadShow:!1,isPage:!0,pageNo:1,pageSize:20,total:0,colConfig:[{field:"insideOrder",isResize:!0,label:"内部订单号",align:"center",type:"text"},{field:"prodMess",isResize:!0,label:"产品信息",align:"center",type:"text"},{field:"crafworkName",isResize:!0,label:"工艺名称",align:"center",type:"text"},{field:"doEmpName",isResize:!0,label:"工艺执行人",align:"center",type:"text"},{field:"okDatetime",isResize:!0,label:"完工日期",align:"center",type:"text"},{field:"actHours",isResize:!0,label:"实际工时",align:"center",type:"text"},{field:"status",isResize:!0,label:"确认状态",align:"center",type:"text"},{width:"200px",isResize:!0,label:"操作",align:"center",type:"button",btnData:[{name:"查看详情",method:"see"},{name:"确认完工",showFunc:function(e,t){return"已完工"!=e.row.status},method:"sure"}]}]},toolbarConfig:{custom:[{icon:"plus",type:"primary",method:"handlerAdd",name:"新增"},{icon:"edit",type:"",method:"handlerEdit",name:"编辑"},{icon:"delete",type:"",method:"handlerDel",name:"删除"}],btnStatus:[!1,!0,!0]},toastConfig:{title:"查看详情",dialogVisible:!1,width:"900px",btnData:[{disabled:!1,isShow:!0,type:"primary",name:"关闭页面",method:"submit",bgColor:"dialog-bule"}]},toastConfig2:{title:"确认完工",dialogVisible:!1,width:"800px",btnData:[{disabled:!1,isShow:!0,type:"primary",name:"确认",method:"submit",bgColor:"dialog-bule"},{disabled:!1,isShow:!0,type:"cancel",name:"取消",method:"cannel",bgColor:"dialog-bule"}]},form:{crafworkName:"",quartersEmp:"",actHours:1,unit:""},jobs:[],paramForm:{list:[1,2,3,4]},paramSet:{title:"参数设置",dialogVisible:!1,width:"500px",btnData:[{isShow:!0,disabled:!1,name:"取消",method:"cancel"},{disabled:!1,isShow:!0,type:"primary",name:"保存",method:"submit"}]}}},computed:s()({},Object(r.d)(["ports"])),methods:{delImg:function(e){var t=this.sureForm.pictureUrls;t.splice(e,1),this.sureForm.pictureUrls=t},resetForm2:function(){this.$refs.ruleForm2.resetFields()},sureFormValidate:function(e){this.$refs.ruleForm2.validate(function(t){if(!t)return!1;e&&e()})},doSure:function(){var e=this;this.sureFormValidate(function(){var t,a={insideOrder:e.sureForm.insideOrder,prodNo:e.sureForm.prodNo,crafworkId:e.sureForm.crafworkId,actHours:e.sureForm.actHours,okDatetime:e.sureForm.okDatetime,pictureUrls:e.sureForm.pictureUrls,getTime:e.sureForm.getTime,desc:e.sureForm.desc};t={params:a,success:function(t){e.toastConfig2.dialogVisible=!1,e.$message({type:"success",message:"任务交工成功"}),e.getList(),setTimeout(function(){e.$refs.ruleForm2.resetFields()},10)},Vue:e},Y.post(G()+"/pictMess/accomplish",t.params,t.success,t.Vue)})},upImgSuccess:function(e,t,a){this.sureForm.pictureUrls||(this.sureForm.pictureUrls=[]),this.$set(this.sureForm.pictureUrls,this.sureForm.pictureUrls.length,e.model),console.log("upImgSuccess",e,t,a)},upImgRemove:function(e){var t=this.sureForm.pictureUrls;t.splice(t.indexOf(e.response.model),1),this.sureForm.pictureUrls=t},upImgChange:function(e,t){for(var a in this.sureForm.pictureUrls=[],t)t[a].response&&this.sureForm.pictureUrls.push(t[a].response.model)},select:function(e){this.selectData=e,1==e.length?this.toolbarConfig.btnStatus=[!1,!1,!1]:0==e.length?this.toolbarConfig.btnStatus=[!1,!0,!0]:this.toolbarConfig.btnStatus=[!1,!0,!1]},handlerSearch:function(){this.tableConfig.pageNo=1,this.tableConfig.pageSize=20,this.getList()},setAttr:function(e){for(var t in e)void 0!==e[t]&&null!==e[t]&&""!==e[t]||delete e[t];return e},getList:function(){var e,t=this,a=s()({pageSize:this.tableConfig.pageSize,pageNo:this.tableConfig.pageNo},this.searchData);a=this.setAttr(a),e={params:a,success:function(e){e.items&&(t.tableData=e.items,t.tableConfig.total=e.numRows)},Vue:this},Y.post(G()+"/taskFinishedMes/findByMes",e.params,e.success,e.Vue)},pageChange:function(){this.getList()},see:function(e){var t=this;t.detailData=e;var a={insideOrder:e.insideOrder,prodNo:e.prodNo,crafworkId:e.crafworkId,getTime:e.getTime};X({params:a,success:function(e){setTimeout(function(){t.detailData2=e,t.detailData2.pictureUrlsStyle=[];var a=[],i=!0,o=!1,s=void 0;try{for(var r,l=w()(e.pictureUrls);!(i=(r=l.next()).done);i=!0){var n=r.value;a.push('background: url("'+n+'") 100px 100px;')}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}t.detailData2.pictureUrlsStyle=a,console.log("that.detailData2==>",t.detailData2)},10),t.toastConfig2.dialogVisible=!1,t.toastConfig.dialogVisible=!0},Vue:t})},sure:function(e){var t=this;this.sureForm={insideOrder:e.insideOrder,prodNo:e.prodNo,prodMess:e.prodMess,crafworkName:e.crafworkName,crafworkId:e.crafworkId,doEmpName:e.doEmpName,sendEmp:e.sendEmp,okDatetime:e.okDatetime,getTime:e.getTime,pictureUrls:[],actHours:1,desc:""};var a=this;a.detailData=e,this.$nextTick(function(){t.$refs.ruleForm2.clearValidate()});var i={insideOrder:e.insideOrder,prodNo:e.prodNo,crafworkId:e.crafworkId,getTime:e.getTime};X({params:i,success:function(e){setTimeout(function(){a.sureForm.pictureUrls=e.pictureUrls,console.log("that.ruleForm",a.ruleForm)},0)},Vue:a}),a.toastConfig.dialogVisible=!1,a.toastConfig2.dialogVisible=!0},getDropOrderMes:function(){var e,t=this;e={params:{pageSize:1e4,pageNo:1},success:function(e){console.log("res==>",e);var a=[];for(var i in e)a.push({name:e[i].insideOrder,value:e[i].insideOrder});t.searchConfig[0][0].childrens=a},Vue:this},Y.post(G()+"/produceOrderAps/getOrder",e.params,e.success,e.Vue)}},mounted:function(){this.getDropOrderMes(),this.getList()}},te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"jobAssignment"},[a("search",{attrs:{data:e.searchData,config:e.searchConfig},on:{search:e.handlerSearch}}),e._v(" "),a("my-table",{attrs:{data:e.tableData,config:e.tableConfig},on:{pageChange:e.pageChange,see:e.see,sure:e.sure,select:e.select}}),e._v(" "),a("my-toast",{attrs:{config:e.toastConfig},on:{submit:function(t){e.toastConfig.dialogVisible=!1,e.$refs.ruleForm.resetFields()}}},[a("div",{staticClass:"form_box"},[a("el-form",{ref:"ruleForm",staticStyle:{"margin-right":"30px"},attrs:{model:e.detailData,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"订单编号"}},[a("span",{staticClass:"f_value"},[e._v(e._s(e.detailData.insideOrder))])])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品信息"}},[a("span",{staticClass:"f_value"},[e._v(e._s(e.detailData.prodMess))])])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"工艺名称"}},[a("span",{staticClass:"f_value"},[e._v(e._s(e.detailData.crafworkName))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"工艺执行人"}},[a("span",{staticClass:"f_value"},[e._v(e._s(e.detailData.doEmpName))])])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"上传人"}},[a("span",{staticClass:"f_value"},[e._v(e._s(e.detailData.sendEmp))])])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"完工日期"}},[a("span",{staticClass:"f_value"},[e._v(e._s(e.detailData.okDatetime))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"确认状态"}},[a("span",{staticClass:"f_value"},[e._v(e._s(e.detailData.status))])])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"上传时间"}},[a("span",{staticClass:"f_value"},[e._v(e._s(e.detailData.sendDate))])])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"说明"}},[a("span",{staticClass:"f_value"},[e._v(e._s(e.detailData.desc))])])],1)],1),e._v(" "),e.detailData2?a("el-row",[a("div",{staticClass:"img_box"},e._l(e.detailData2.pictureUrls,function(t,i){return a("li",{staticClass:"qw_pic_box"},[a("img",{staticClass:"qw_pic",attrs:{src:t||e.emptySrc}}),e._v(" "),a("p",{staticClass:"img_title"},[e._v("图片"+e._s(i+1))])])}))]):e._e()],1)],1)]),e._v(" "),a("my-toast",{attrs:{config:e.toastConfig2},on:{submit:e.doSure,close:e.resetForm2,cannel:function(t){e.toastConfig2.dialogVisible=!1,e.resetForm2()}}},[a("div",{staticClass:"form_box"},[a("el-form",{ref:"ruleForm2",staticStyle:{"margin-right":"30px"},attrs:{model:e.sureForm,rules:e.sureRules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"订单编号"}},[a("span",{staticClass:"f_value"},[e._v(e._s(e.sureForm.insideOrder))])])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品信息"}},[a("span",{staticClass:"f_value"},[e._v(e._s(e.sureForm.prodMess))])])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"工艺名称"}},[a("span",{staticClass:"f_value"},[e._v(e._s(e.sureForm.crafworkName))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"工艺执行人"}},[a("span",{staticClass:"f_value"},[e._v(e._s(e.sureForm.doEmpName))])])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"上传人"}},[a("span",{staticClass:"f_value"},[e._v(e._s(e.sureForm.sendEmp))])])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"完工日期",prop:"okDatetime"}},[a("el-date-picker",{staticStyle:{width:"144px"},attrs:{type:"date",placeholder:"请选择日期","value-format":"yyyy-MM-dd"},model:{value:e.sureForm.okDatetime,callback:function(t){e.$set(e.sureForm,"okDatetime",t)},expression:"sureForm.okDatetime"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"实际工时",prop:"actHours"}},[a("el-input-number",{attrs:{controls:!1,min:0,max:99999,placeholder:"请输入实际工时"},model:{value:e.sureForm.actHours,callback:function(t){e.$set(e.sureForm,"actHours",t)},expression:"sureForm.actHours"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"说明"}},[a("el-input",{attrs:{placeholder:"请输入说明（限50字）",maxlength:"50"},model:{value:e.sureForm.desc,callback:function(t){e.$set(e.sureForm,"desc",t)},expression:"sureForm.desc"}})],1)],1)],1),e._v(" "),a("el-row",[a("div",{staticClass:"img_box"},[e._l(e.sureForm.pictureUrls,function(t,i){return a("li",{staticClass:"qw_pic_box"},[a("img",{staticClass:"qw_pic",attrs:{src:t||e.emptySrc}}),e._v(" "),a("p",[a("span",{staticClass:"img_title"},[e._v("图片"+e._s(i+1))]),a("span",{staticClass:"btn_del",on:{click:function(t){e.delImg(i)}}},[e._v("删除")])])])}),e._v(" "),a("el-upload",{staticClass:"upImg",attrs:{action:e.uploadPath,"list-type":"picture-card","on-success":e.upImgSuccess,"show-file-list":!1}},[a("i",{staticClass:"el-icon-plus"})])],2)])],1)],1)])],1)},staticRenderFns:[]};var ae=a("vSla")(ee,te,!1,function(e){a("lCul")},null,null).exports,ie={data:function(){return{operateType:"see",productList:[],orders:[],customs:[],detailList:[],initDetail:[],initForm:{},orgList:[],searchData:{},searchConfig:[[{label:"内部订单号",field:"insideOrder",type:"input",placeholder:"请输入姓名"},{label:"客户信息",field:"custom",type:"input",placeholder:"请输入手机号码"},{label:"订单号",field:"orderNo",type:"input",placeholder:"请输入手机号码"}],[{label:"订单状态",field:"orderStatus",type:"select",placeholder:"请输入姓名",childrens:[{name:"审批中",value:"AS002"},{name:"已通过",value:"AS001"},{name:"已驳回",value:"AS003"}]},{label:"下单日期",field:"dateTime",type:"daterange",placeholder:"请输入手机号码"}]],tableData:[1],tableConfig:{isHigh:!1,isSelection:!1,align:"center",isPage:!0,pageNo:1,pageSize:20,total:0,colConfig:[{fixed:!1,field:"orderSourceLabel",width:"",isSort:!1,isResize:!0,label:"订单来源",align:"center",type:"text"},{fixed:!1,field:"insideOrder",width:"",isSort:!1,isResize:!0,label:"内部订单号",align:"center",type:"text"},{fixed:!1,field:"customName",width:"",isSort:!1,isResize:!0,label:"客户信息",align:"center",type:"text"},{fixed:!1,field:"orderNo",width:"",isSort:!1,isResize:!0,label:"订单号",align:"center",type:"text"},{fixed:!1,field:"voucherDate",width:"",isSort:!1,isResize:!0,label:"下单日期",align:"center",type:"text"},{fixed:!1,field:"firstDate",width:"",isSort:!1,isResize:!0,label:"交图日期",align:"center",type:"text"},{fixed:!1,field:"orgName",width:"",isSort:!1,isResize:!0,label:"生产部门",align:"center",type:"text"},{fixed:!1,field:"orderStatusLabel",width:"",isSort:!1,isResize:!0,label:"订单状态",align:"center",type:"text"},{fixed:!1,width:"",isSort:!1,isResize:!0,label:"操作",align:"center",type:"button",btnData:[{name:"订单明细",method:"see"},{name:"审批",method:"approve",color:"#F6463B"}]}]},toastConfig:{title:"新增订单",dialogVisible:!1,width:"640px",btnData:[{isShow:!0,disabled:!1,name:"不通过",method:"unSubmit"},{disabled:!1,isShow:!0,type:"primary",name:"通过",method:"submit"},{disabled:!1,isShow:!0,type:"primary",name:"关闭",method:"cancel"}]},form:{orderSourceId:"",customNo:"",orderNo:"",firstDate:"",orgId:"",voucherDate:"",insideOrder:""}}},computed:s()({},Object(r.d)(["ports"]),{customShow:function(){return""!=this.form.orderSourceId},orderShow:function(){return 1==this.form.orderSourceId&&""!=this.form.customNo},otherShow:function(){return 1==this.form.orderSourceId?""!=this.form.customNo&&""!=this.form.orderNo:""!=this.form.customNo}}),methods:{see:function(e){var t=this;this.operateType="see",this.toastConfig.title="订单明细",this.toastConfig.btnData[0].isShow=!1,this.toastConfig.btnData[1].isShow=!1,this.toastConfig.btnData[2].isShow=!0,this.$http.post(this.ports+"/produceOrderAps/getDetailByVoucherNo",{voucherNo:e.voucherNo},function(a){console.log(a),t.form={orderSourceId:a.orderSourceId,customNo:a.customNo,orderNo:a.orderNo,firstDate:a.firstDate,orgId:a.orgId,voucherDate:a.voucherDate,insideOrder:a.insideOrder,id:e.id,voucherNo:e.voucherNo},t.detailList=a.produceOrderDetailApsDtos,t.toastConfig.dialogVisible=!0},this)},approve:function(e){var t=this;if(this.operateType="see",this.toastConfig.title="订单明细",this.toastConfig.btnData[0].isShow=!0,this.toastConfig.btnData[1].isShow=!0,this.toastConfig.btnData[2].isShow=!1,"已通过"==e.orderStatusLabel||"已驳回"==e.orderStatusLabel)return this.$message.error("已审批，请勿重复审批");this.$http.post(this.ports+"/produceOrderAps/getDetailByVoucherNo",{voucherNo:e.voucherNo},function(a){console.log(a),t.form={orderSourceId:a.orderSourceId,customNo:a.customNo,orderNo:a.orderNo,firstDate:a.firstDate,orgId:a.orgId,voucherDate:a.voucherDate,insideOrder:a.insideOrder,id:e.id,voucherNo:e.voucherNo},t.detailList=a.produceOrderDetailApsDtos,t.toastConfig.dialogVisible=!0},this)},unSubmit:function(){var e=this;this.$http.post(this.ports+"/produceOrderAps/audit",{voucherNo:this.form.voucherNo,isPass:!1},function(t){e.toastConfig.dialogVisible=!1,e.getList(),e.$message({type:"success",message:"审批成功"})},this)},handlerSubmit:function(){var e=this;this.$http.post(this.ports+"/produceOrderAps/audit",{voucherNo:this.form.voucherNo,isPass:!0},function(t){e.toastConfig.dialogVisible=!1,e.$message({type:"success",message:"审批成功"}),e.getList()},this)},search:function(){this.tableConfig.pageNo=1,this.tableConfig.pageSize=20,this.getList()},pageChange:function(){this.getList()},getList:function(){var e=this,t=y()({},this.searchData);t.dateTime&&(t.voucherDateFrom=t.dateTime[0],t.voucherDateTo=t.dateTime[1]),delete t.dateTime,this.$http.post(this.ports+"/produceOrderAps/list",s()({},t,{pageNo:this.tableConfig.pageNo,pageSize:this.tableConfig.pageSize}),function(t){e.tableData=t.items,e.tableConfig.total=t.numRows},this)}},mounted:function(){var e=this;this.getList(),this.$http.post(this.ports+"/custom/listInCrm",{},function(t){e.customs=t},this),this.$http.post(this.ports+"/casOrg/listInHcm",{},function(t){console.log(t),e.orgList=t},this),this.$http.post(this.ports+"/productStorePlm/listForQueryCriteria",{},function(t){e.productList=t},this)}},oe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"technology"},[a("search",{attrs:{data:e.searchData,config:e.searchConfig},on:{search:e.search}}),e._v(" "),a("my-table",{attrs:{data:e.tableData,config:e.tableConfig},on:{pageChange:e.pageChange,see:e.see,approve:e.approve}}),e._v(" "),a("my-toast",{attrs:{config:e.toastConfig},on:{unSubmit:e.unSubmit,submit:e.handlerSubmit,cancel:function(t){e.toastConfig.dialogVisible=!1}}},[a("el-form",{ref:"ruleForm",staticStyle:{"margin-right":"30px"},attrs:{model:e.form,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"订单来源",prop:"orderSourceId"}},[a("el-select",{attrs:{disabled:"edit"==e.operateType||"see"==e.operateType,placeholder:"请选择订单来源",size:"small"},model:{value:e.form.orderSourceId,callback:function(t){e.$set(e.form,"orderSourceId",t)},expression:"form.orderSourceId"}},[a("el-option",{attrs:{label:"销售订单",value:1}}),e._v(" "),a("el-option",{attrs:{label:"销售预测",value:2}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"内部订单号",prop:"insideOrder"}},[a("el-input",{attrs:{disabled:"edit"==e.operateType||"see"==e.operateType,size:"small",placeholder:"请输入内部订单号"},model:{value:e.form.insideOrder,callback:function(t){e.$set(e.form,"insideOrder",t)},expression:"form.insideOrder"}})],1)],1),e._v(" "),e.customShow?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"客户信息",prop:"customNo"}},[a("el-select",{attrs:{placeholder:"请选择客户信息",size:"small",disabled:"see"==e.operateType},model:{value:e.form.customNo,callback:function(t){e.$set(e.form,"customNo",t)},expression:"form.customNo"}},e._l(e.customs,function(e){return a("el-option",{key:e.value,attrs:{label:e.customName,value:e.customNo}})}))],1)],1):e._e(),e._v(" "),e.orderShow?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"订单号",prop:"orderNo"}},[a("el-select",{attrs:{placeholder:"请选择订单号",size:"small",disabled:"see"==e.operateType},model:{value:e.form.orderNo,callback:function(t){e.$set(e.form,"orderNo",t)},expression:"form.orderNo"}},e._l(e.orders,function(e){return a("el-option",{key:e.orderNo,attrs:{label:e.orderNo,value:e.orderNo}})}))],1)],1):e._e(),e._v(" "),e.otherShow?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"下单日期",prop:"voucherDate"}},[a("el-date-picker",{staticStyle:{width:"101%"},attrs:{disabled:""!=e.form.orderNo||"see"==e.operateType,size:"small","value-format":"yyyy-MM-dd",placeholder:"请输入下单日期"},model:{value:e.form.voucherDate,callback:function(t){e.$set(e.form,"voucherDate",t)},expression:"form.voucherDate"}})],1)],1):e._e(),e._v(" "),e.otherShow?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"交图日期",prop:"firstDate"}},[a("el-date-picker",{staticStyle:{width:"205px"},attrs:{disabled:""!=e.form.orderNo||"see"==e.operateType,size:"small","value-format":"yyyy-MM-dd",placeholder:"请输入交图日期"},model:{value:e.form.firstDate,callback:function(t){e.$set(e.form,"firstDate",t)},expression:"form.firstDate"}})],1)],1):e._e(),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"生产部门",prop:"orgId"}},[a("el-select",{attrs:{disabled:"see"==e.operateType,placeholder:"请选择生产部门",size:"small"},model:{value:e.form.orgId,callback:function(t){e.$set(e.form,"orgId",t)},expression:"form.orgId"}},e._l(e.orgList,function(e){return a("el-option",{key:e.value,attrs:{label:e.orgName,value:e.id}})}))],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"myTable",staticStyle:{width:"100%",padding:"20px","box-sizing":"border-box"}},[a("el-table",{attrs:{data:e.detailList}},[a("el-table-column",{attrs:{prop:"prodName",label:"产品信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.prodName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.amount))])]}}])}),e._v(" "),"see"==e.operateType?a("el-table-column",{attrs:{label:"已交货数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.okAmount))])]}}])}):e._e()],1)],1)],1)],1)},staticRenderFns:[]};var se=a("vSla")(ie,oe,!1,function(e){a("5usR")},null,null).exports,re=a("a3Yh"),le=a.n(re),ne=a("ZLEe"),ce=a.n(ne),de={name:"vue-upload",props:{accept:{type:Object,default:null},url:{type:String,default:""},fileNumLimit:{type:Number,default:100},fileSingleSizeLimit:{type:Number,default:2048e3},formData:{type:Object,default:null},keyGenerator:{type:Function,default:function(e){return(new Date).getTime()+"."+e.name}},multiple:{type:Boolean,default:!1},uploadButton:{type:String,default:""}},data:function(){return{uploader:null}},mounted:function(){this.initWebUpload()},methods:{initWebUpload:function(){var e=this;this.uploader=WebUploader.create({auto:!0,swf:"/static/lib/webuploader/Uploader.swf",server:"http://192.168.0.222:8081/fileSystem/uploadBigFile",pick:{id:this.uploadButton,multiple:this.multiple,label:""},accept:this.getAccept(this.accept),threads:1,fileNumLimit:this.fileNumLimit,formData:this.formData,chunked:!0,chunkSize:20971520,duplicate:!0}),this.uploader.on("fileQueued",function(t){e.$emit("fileChange",t)}),this.uploader.on("uploadStart",function(e){}),this.uploader.on("uploadProgress",function(t,a){e.$emit("progress",t,a)}),this.uploader.on("uploadSuccess",function(t,a){e.$emit("success",t,a)}),this.uploader.on("uploadError",function(t,a){console.error(a),e.$emit("uploadError",t,a)}),this.uploader.on("error",function(t){var a="";a="F_EXCEED_SIZE"===t?"文件大小不能超过"+e.fileSingleSizeLimit/1024e3+"M":"Q_EXCEED_NUM_LIMIT"===t?"文件上传已达到最大上限数":"上传出错！请检查后重新上传！错误代码"+t,console.error(a),e.$emit("error",a)}),this.uploader.on("uploadComplete",function(t,a){e.$emit("complete",t,a)})},upload:function(e){console.log(e),this.uploader.upload(e)},stop:function(e){console.log(e),this.uploader.stop(e)},cancelFile:function(e){console.log(e),this.uploader.cancelFile(e)},removeFile:function(e,t){this.uploader.removeFile(e,t)},getAccept:function(e){switch(e){case"text":return{title:"Texts",exteensions:"doc,docx,xls,xlsx,ppt,pptx,pdf,txt",mimeTypes:".doc,docx,.xls,.xlsx,.ppt,.pptx,.pdf,.txt"};case"video":return{title:"Videos",exteensions:"mp4",mimeTypes:".mp4"};case"image":return{title:"Images",exteensions:"gif,jpg,jpeg,bmp,png",mimeTypes:".gif,.jpg,.jpeg,.bmp,.png"};default:return e}}}},ue={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"upload"})},staticRenderFns:[]};var me={data:function(){return{percentage:0,myStatus:"",isUploading:!1}},props:["form"],computed:{uploader:function(){return this.$refs.uploader}},methods:{fileChange:function(e){e.size&&(this.isUploading=!0,this.percentage=0,this.myStatus="")},onProgress:function(e,t){this.percentage=parseInt((100*t).toFixed(0))},uploadError:function(e){this.myStatus="exception",this.isUploading=!1,this.$message.error(e)},onSuccess:function(e,t){var a=this;console.log(e),t.result?(this.myStatus="success",setTimeout(function(){a.isUploading=!1,a.form.fileList.unshift(t.model),a.form.pictures.push(t.model)},1e3)):(this.myStatus="exception",this.$alert(t.message,"系统提示"),setTimeout(function(){a.isUploading=!1},3e3))},resume:function(e){this.uploader.upload(e)},stop:function(e){this.uploader.stop(e)},remove:function(e){this.uploader.cancelFile(e),this.uploader.removeFile(e,!0);var t=this.form.fileList.findIndex(function(t){return t.id===e.id});this.form.fileList.splice(t,1)},fileSize:function(e){return WebUploader.Base.formatSize(e)},fileCategory:function(e){var t="",a={image:["gif","jpg","jpeg","png","bmp","webp"],video:["mp4","m3u8","rmvb","avi","swf","3gp","mkv","flv"],text:["doc","txt","docx","pages","epub","pdf","numbers","csv","xls","xlsx","keynote","ppt","pptx"]};return ce()(a).forEach(function(i){a[i].indexOf(e)>-1&&(t=i)}),t}},watch:{},components:{vueUpload:a("vSla")(de,ue,!1,function(e){a("lEK5")},null,null).exports}},pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uploadPage clearfix"},[e._m(0),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isUploading,expression:"isUploading"}],staticClass:"file"},[a("div",{staticClass:"cover"}),e._v(" "),a("el-progress",{attrs:{type:"circle",percentage:e.percentage,width:50,status:e.myStatus,"stroke-width":3}})],1),e._v(" "),e._l(e.form.fileList,function(e){return a("div",{staticClass:"file"},[a("img",{attrs:{src:e,alt:""}})])}),e._v(" "),a("vue-upload",{ref:"uploader",attrs:{uploadButton:"#filePicker",formData:{appSrc:"mes"}},on:{fileChange:e.fileChange,progress:e.onProgress,success:e.onSuccess,uploadError:e.uploadError}})],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"filePicker"}},[t("i",{staticClass:"el-icon-plus"})])}]};var fe,he=a("vSla")(me,pe,!1,function(e){a("OaRt")},null,null).exports,ge={data:function(){return{currentImg:"",centerDialogVisible:!1,pictureUrls:[],productList:[],deleteArr:[],selectData:[],tableData:[],tableConfig:{isChoose:!1,isHigh:!1,isSelection:!1,align:"center",loadShow:!1,isPage:!0,pageNo:1,pageSize:20,total:0,colConfig:[{field:"insideOrder",label:"订单号",type:"text"},{field:"customMess",label:"客户信息",type:"text"},{field:"prodMess",label:"产品信息",type:"text"},{field:"crafworkName",label:"工艺名称",type:"text"},{field:"cusIsOk",label:"客户是否通过",type:"text"},{field:"checkEmpNo",label:"检查人",type:"text"},{field:"checkDate",label:"检查日期",type:"text"},{field:"description",label:"描述",type:"text"},{label:"操作",type:"button",btnData:[{name:"发起评审",method:"upload",showFunc:function(e,t){return"未发起评审"==e.row.cusIsOk}},{name:"查看详情",method:"upload",showFunc:function(e,t){return"未发起评审"!=e.row.cusIsOk}}]}]},searchData:{},searchConfig:[[{label:"订单号",field:"insideOrder",filterable:!0,type:"select",placeholder:"请选择订单编号",childrens:[],prop:{label:"insideOrder",value:"insideOrder"}},{label:"客户信息",field:"customMess",filterable:!0,type:"select",placeholder:"请选择客户信息",childrens:[],prop:{label:"customMess",value:"customNo"}}]],toastConfig:{title:"发起评审",dialogVisible:!1,width:"1000px",btnData:[{disabled:!1,isShow:!0,type:"primary",name:"发起评审",method:"submit"},{isShow:!0,name:"关闭",method:"close"}]},form:{fileList:[]},jobs:[]}},computed:s()({},Object(r.d)(["ports"])),components:{upload:he},mounted:function(){var e=this;this.getData(),this.$http.post(this.ports+"/deliveryProd/findCus",{},function(t){e.searchConfig[0][1].childrens=t,e.productList=t},this),this.$http.post(this.ports+"/produceOrderAps/getOrder",{},function(t){e.searchConfig[0][0].childrens=t,e.productList=t},this)},methods:(fe={getData:function(){for(var e=0;e<10;e++)app.imgIstrue[e]=!1},imgScale:function(e){var t=app.imgIstrue[e];app.imgIstrue.forEach(function(e,t){app.imgIstrue.splice(t,1,!1)}),app.imgIstrue.splice(e,1,!t)},upload:function(e,t){var a=this;console.log(e),this.$http.post(this.ports+"/pictMess/pictDetail",{insideOrder:e.insideOrder,prodNo:e.prodNo,crafworkId:e.crafworkId,customNo:e.customNo,getTime:e.getTime},function(t){console.log(t,"======"),a.form={insideOrder:e.insideOrder,prodMess:e.prodMess,prodNo:e.prodNo,crafworkName:e.crafworkName,crafworkId:e.crafworkId,customMess:e.customMess,doEmpName:e.doEmpName,customNo:e.customNo,pictureUrls:t.pictureUrls,getTime:t.getTime,pictures:y()([],t),fileList:y()([],t)},"未发起评审"==e.cusIsOk?(a.toastConfig.title="发起评审",a.toastConfig.btnData[0].isShow=!0):(a.toastConfig.title="查看详情",a.toastConfig.btnData[0].isShow=!1),a.toastConfig.dialogVisible=!0},this)},submit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$http.post(e.ports+"/taskFinishedMes/tasks",{insideOrder:e.form.insideOrder,prodNo:e.form.prodNo,crafworkId:e.form.crafworkId,getTime:e.form.getTime},function(t){e.$message({showClose:!0,message:"提交成功",type:"success"}),e.$refs.ruleForm.resetFields(),e.toastConfig.dialogVisible=!1,e.form,e.getData()},e)})},close:function(){var e=this;this.$http.post(this.ports+"/crafworkApprove/approveStatus",{id:this.form.id,cusIsOk:3},function(t){e.getData(),e.toastConfig.dialogVisible=!1},this)}},le()(fe,"getData",function(){var e=this,t=JSON.parse(f()(this.searchData));for(var a in this.searchData.createDate&&(t.startDate=t.createDate[0],t.endDate=t.createDate[1],delete t.createDate),t)t[a]||delete t[a];this.$http.post(this.ports+"/taskFinishedMes/cusReview",s()({pageNo:this.tableConfig.pageNo,pageSize:this.tableConfig.pageSize},t),function(t){e.tableData=t.items,e.tableConfig.total=t.numRows},this)}),le()(fe,"pageChange",function(){this.getData()}),le()(fe,"search",function(){this.tableConfig.pageNo=1,this.tableConfig.pageSize=20,this.getData()}),fe)},be={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"checkCustomerData",staticStyle:{background:"#FFF",padding:"10px","box-sizing":"border-box"}},[a("search",{attrs:{data:e.searchData,config:e.searchConfig},on:{search:e.search}}),e._v(" "),a("my-table",{attrs:{data:e.tableData,config:e.tableConfig,"dialogVisible:false":""},on:{pageChange:e.pageChange,upload:e.upload}}),e._v(" "),a("my-toast",{attrs:{config:e.toastConfig},on:{submit:e.submit,close:function(t){e.toastConfig.dialogVisible=!1}}},[a("el-form",{ref:"ruleForm",staticStyle:{"margin-right":"30px"},attrs:{model:e.form,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"订单编号"}},[e._v("\n              "+e._s(e.form.insideOrder)+"\n            ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"客户信息"}},[e._v("\n                "+e._s(e.form.customMess)+"\n            ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品信息"}},[e._v("\n              "+e._s(e.form.prodMess)+"\n            ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"工艺执行人"}},[e._v("\n              "+e._s(e.form.doEmpName)+"\n            ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"工艺名称"}},[e._v("\n              "+e._s(e.form.crafworkName)+"\n            ")])],1)],1),e._v(" "),a("el-row",[a("el-col",[a("div",{staticClass:"imgList clearfix"},e._l(e.form.pictureUrls,function(t,i){return a("div",{staticStyle:{height:"100px","max-width":"100px",cursor:"pointer",border:"1px solid #666"},on:{dblclick:function(a){e.centerDialogVisible=!0,e.currentImg=t}}},[a("img",{attrs:{src:t}})])}))])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.centerDialogVisible,width:"900px"},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("div",[a("div",{staticClass:"no-scroll",staticStyle:{"text-align":"center",width:"800px",height:"500px",position:"relative",overflow:"auto",margin:"0 auto"}},[a("img",{staticStyle:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)","max-width":"100%"},attrs:{src:e.currentImg}})])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("关 闭")])],1)])],1)},staticRenderFns:[]};var ve=a("vSla")(ge,be,!1,function(e){a("ZsCt")},null,null).exports,ye={data:function(){return{centerDialogVisible:!1,currentImg:"",deleteArr:[],selectData:[],searchData:{},searchConfig:[[{label:"订单号",field:"insideOrder",type:"select",childrens:[],prop:{label:"insideOrder",value:"insideOrder"}},{label:"产品信息",field:"prodNo",type:"select",childrens:[],prop:{label:"prodName",value:"prodNo"}}]],tableData:[],tableConfig:{isHigh:!1,isSelection:!1,align:"center",loadShow:!1,isPage:!0,pageNo:1,pageSize:20,total:0,colConfig:[{fixed:!1,field:"insideOrder",width:"",isSort:!1,isResize:!0,label:"订单号",align:"center",type:"text"},{fixed:!1,field:"prodName",width:"",isSort:!1,isResize:!0,label:"产品信息",align:"center",type:"text"},{fixed:!1,field:"empName",width:"",isSort:!1,isResize:!0,label:"工艺执行人",align:"center",type:"text"},{fixed:!1,field:"crafworkName",width:"",isSort:!1,isResize:!0,label:"工艺名称",align:"center",type:"text"},{fixed:!1,field:"cusIsOk",width:"",isSort:!1,isResize:!0,label:"客户是否通过",align:"center",type:"text"},{fixed:!1,width:"200px",isSort:!1,isResize:!0,label:"操作",align:"center",type:"button",btnData:[{name:"工艺评审",method:"review"}]}]},toastConfig:{title:"工艺评审",dialogVisible:!1,width:"752px",btnData:[{isShow:!0,disabled:!1,name:"不通过",method:"cancel"},{disabled:!1,isShow:!0,type:"primary",name:"通过",method:"submit"}]},form:{},jobs:[]}},computed:s()({},Object(r.d)(["ports"])),methods:{review:function(e,t){var a=this;"待评审"==e.cusIsOk?(this.form=e,this.$http.post(this.ports+"/crafworkApprove/approve",{crafworkId:e.crafworkId,prodNo:e.prodNo,insideOrder:e.insideOrder,getTime:e.getTime},function(e){a.toastConfig.dialogVisible=!0,a.$set(a.form,"imgList",e)},this)):this.$message.error("已完成审核请勿重复操作")},submit:function(){var e=this;this.$http.post(this.ports+"/crafworkApprove/approveStatus",{id:this.form.id,cusIsOk:2},function(t){e.getList(),e.toastConfig.dialogVisible=!1},this)},cancel:function(){var e=this;this.$http.post(this.ports+"/crafworkApprove/approveStatus",{id:this.form.id,cusIsOk:3},function(t){e.getList(),e.toastConfig.dialogVisible=!1},this)},handlerSearch:function(){this.tableConfig.pageNo=1,this.tableConfig.pageSize=20,this.getList()},getList:function(){var e=this;this.$http.post(this.ports+"/crafworkApprove/page",s()({pageNo:this.tableConfig.pageNo,pageSize:this.tableConfig.pageSize},this.searchData),function(t){e.tableData=t.items,e.tableConfig.total=t.numRows},this)},pageChange:function(){this.getList()}},mounted:function(){var e=this;this.getList(),this.$http.post(this.ports+"/crafworkApprove/optionOrderNo",{},function(t){e.searchConfig[0][0].childrens=t},this),this.$http.post(this.ports+"/crafworkApprove/optionProd",{},function(t){e.searchConfig[0][1].childrens=t},this)}},_e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"processReview"},[a("search",{attrs:{data:e.searchData,config:e.searchConfig},on:{search:e.handlerSearch}}),e._v(" "),a("my-table",{attrs:{data:e.tableData,config:e.tableConfig},on:{pageChange:e.pageChange,review:e.review}}),e._v(" "),a("my-toast",{attrs:{config:e.toastConfig},on:{submit:e.submit,cancel:e.cancel}},[a("el-form",{ref:"ruleForm",staticStyle:{"margin-right":"30px"},attrs:{model:e.form,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"订单号:"}},[e._v("\n                        "+e._s(e.form.insideOrder)+"\n                    ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品信息:"}},[e._v("\n                        "+e._s(e.form.prodName)+"\n                    ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"工艺信息:"}},[e._v("\n                        "+e._s(e.form.crafworkName)+"\n                    ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"工艺执行人:"}},[e._v("\n                        "+e._s(e.form.empName)+"\n                    ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"图片提交人:"}},[e._v("\n                        "+e._s(e.form.empName)+"\n                    ")])],1)],1)],1),e._v(" "),a("div",{staticClass:"imgList clearfix"},e._l(e.form.imgList,function(t){return a("div",{on:{dblclick:function(a){e.centerDialogVisible=!0,e.currentImg=t.linkPath}}},[a("img",{attrs:{src:t.linkPath}})])}))],1),e._v(" "),a("el-dialog",{attrs:{visible:e.centerDialogVisible,width:"900px"},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("div",[a("div",{staticClass:"no-scroll",staticStyle:{"text-align":"center",width:"800px",height:"500px",position:"relative",overflow:"auto",margin:"0 auto"}},[a("img",{staticStyle:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)","max-width":"100%"},attrs:{src:e.currentImg}})])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("关 闭")])],1)])],1)},staticRenderFns:[]};var we=a("vSla")(ye,_e,!1,function(e){a("omQM")},null,null).exports,Ce={data:function(){return{deleteArr:[],selectData:[],tableData:[],tableConfig:{isHigh:!1,isSelection:!1,align:"center",loadShow:!1,isPage:!0,pageNo:1,pageSize:20,total:0,colConfig:[{fixed:!1,field:"orderNo",width:"",isSort:!1,isResize:!0,label:"销售订单号",align:"center",type:"text"},{fixed:!1,field:"prodName",width:"",isSort:!1,isResize:!0,label:"产品信息",align:"center",type:"text"},{fixed:!1,field:"crafworkName",width:"",isSort:!1,isResize:!0,label:"工艺名称",align:"center",type:"text"},{fixed:!1,field:"createTime",width:"",isSort:!1,isResize:!0,label:"上传时间",align:"center",type:"text"},{fixed:!1,width:"200px",isSort:!1,isResize:!0,label:"操作",align:"center",type:"button",btnData:[{name:"上传资料",method:"upload"}]}]},toastConfig:{title:"上传资料",dialogVisible:!1,width:"900px",btnData:[{isShow:!0,disabled:!1,name:"取消",method:"cancel"},{disabled:!1,isShow:!0,type:"primary",name:"提交",method:"submit"}]},form:{fileList:[]},jobs:[]}},computed:s()({},Object(r.d)(["ports"])),components:{upload:he},methods:{upload:function(e,t){var a=this;this.$http.post(this.ports+"/processPictMes/findAllUploadPic",{orderNo:e.orderNo,prodNo:e.prodNo,crafworkId:e.crafworkId,id:e.id},function(t){console.log(t),a.form={orderNo:e.orderNo,prodName:e.prodName,prodNo:e.prodNo,crafworkName:e.crafworkName,crafworkId:e.crafworkId,pictures:y()([],t),fileList:y()([],t),id:e.id},a.toastConfig.dialogVisible=!0},this)},submit:function(){var e=this,t=y()({},this.form);t.pictures=t.pictures.join(","),delete t.fileList,this.$http.post(this.ports+"/processPictMes/uploadFile",t,function(t){e.getList(),e.toastConfig.dialogVisible=!1},this)},cancel:function(){var e=this;this.$http.post(this.ports+"/crafworkApprove/approveStatus",{id:this.form.id,cusIsOk:3},function(t){e.getList(),e.toastConfig.dialogVisible=!1},this)},getList:function(){var e=this;this.$http.post(this.ports+"/processPictMes/page",{pageNo:this.tableConfig.pageNo,pageSize:this.tableConfig.pageSize},function(t){e.tableData=t.items,e.tableConfig.total=t.numRows},this)},pageChange:function(){this.getList()}},mounted:function(){this.getList()}},xe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"customerUploadData"},[a("my-table",{attrs:{data:e.tableData,config:e.tableConfig},on:{pageChange:e.pageChange,upload:e.upload}}),e._v(" "),a("my-toast",{attrs:{config:e.toastConfig},on:{submit:e.submit,cancel:function(t){e.toastConfig.dialogVisible=!1}}},[a("el-form",{ref:"ruleForm",staticStyle:{"margin-right":"30px"},attrs:{model:e.form,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"销售订单号:"}},[e._v("\n                        "+e._s(e.form.orderNo)+"\n                    ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品信息:"}},[e._v("\n                        "+e._s(e.form.prodName)+"\n                    ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"工艺信息:"}},[e._v("\n                        "+e._s(e.form.crafworkName)+"\n                    ")])],1)],1)],1),e._v(" "),a("upload",{staticStyle:{padding:"0 20px"},attrs:{form:e.form}})],1)],1)},staticRenderFns:[]};var Se=a("vSla")(Ce,xe,!1,function(e){a("g4fd")},null,null).exports,De={data:function(){return{userList:[],selectData:[],rules:{price:C.require("number","工艺名称不能为空"),doEmpNo:C.require("string","请选择工艺执行人"),planDate:C.require("string","请选择计划开始时间"),planHours:C.require("number","计划工时不能为空"),actDate:C.require("string","请选择实际开始时间")},searchData:{},searchConfig:[[{label:"内部订单号",field:"insideOrder",type:"input",placeholder:"请输入内部订单号"},{label:"产品信息",field:"prodName",type:"input",placeholder:"请输入产品信息"},{label:"任务状态",field:"status",type:"select",placeholder:"请输入姓名",childrens:[{name:"待派工",value:"0"},{name:"处理中",value:"1"},{name:"已完成",value:"2"},{name:"审核未通过",value:"3"}]}]],tableData:[],tableConfig:{isHigh:!1,isSelection:!0,align:"center",isPage:!0,pageNo:1,pageSize:20,total:0,colConfig:[{fixed:!1,field:"insideOrder",width:"",isSort:!1,isResize:!0,label:"内部订单号",align:"center",type:"text"},{fixed:!1,field:"prodName",width:"",isSort:!1,isResize:!0,label:"产品信息",align:"center",type:"text"},{fixed:!1,field:"crafworkName",width:"",isSort:!1,isResize:!0,label:"工艺名称",align:"center",type:"text"},{fixed:!1,field:"price",width:"",isSort:!1,isResize:!0,label:"工艺工价",align:"center",type:"text"},{fixed:!1,field:"doEmpName",width:"",isSort:!1,isResize:!0,label:"工艺执行人",align:"center",type:"text"},{fixed:!1,field:"amount",width:"",isSort:!1,isResize:!0,label:"数量",align:"center",type:"text"},{fixed:!1,field:"planDate",width:"",isSort:!1,isResize:!0,label:"计划开始时间",align:"center",type:"text"},{fixed:!1,field:"actDate",width:"120",isSort:!1,isResize:!0,label:"实际开始时间",align:"center",type:"text"},{fixed:!1,field:"getTime",isSort:!1,isResize:!0,label:"领派工时间",align:"center",type:"text"},{fixed:!1,field:"crafworkStandHours",width:"",isSort:!1,isResize:!0,label:"标准工时",align:"center",type:"text"},{fixed:!1,field:"planHours",width:"",isSort:!1,isResize:!0,label:"计划工时",align:"center",type:"text"},{fixed:!1,field:"statusName",width:"",isSort:!1,isResize:!0,label:"任务状态",align:"center",type:"text"}]}}},computed:s()({},Object(r.d)(["ports"])),methods:{getList:function(){var e=this;this.$http.post(this.ports+"/taskReceiveEmpMes/list",s()({pageSize:this.tableConfig.pageSize,pageNo:this.tableConfig.pageNo},this.searchData),function(t){e.tableData=t.items,e.tableConfig.total=t.numRows},this)},handlerSearch:function(){this.tableConfig.pageNo=1,this.tableConfig.pageSize=20,this.getList()},setPrice:function(){var e=this;this.$prompt("工艺工价","请输入工艺工价",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[1-9]\d*(\.\d+)?$/,inputErrorMessage:"请输入工艺工价"}).then(function(t){var a=t.value,i=[],o=!0,s=!1,r=void 0;try{for(var l,n=w()(e.selectData);!(o=(l=n.next()).done);o=!0){var c=l.value;i.push(c.id)}}catch(e){s=!0,r=e}finally{try{!o&&n.return&&n.return()}finally{if(s)throw r}}e.$http.post(e.ports+"/taskPondMes/setTaskPrice",{taskPondIds:i.join(","),price:a},function(t){e.getList()},e)}).catch(function(){e.$message({type:"info",message:"取消输入"})})},pageChange:function(){console.log("111"),this.getList()}},mounted:function(){this.getList()}},Ne={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"taskingRecord"},[t("search",{attrs:{data:this.searchData,config:this.searchConfig},on:{search:this.handlerSearch}}),this._v(" "),t("my-table",{attrs:{data:this.tableData,config:this.tableConfig},on:{pageChange:this.pageChange}})],1)},staticRenderFns:[]};var ke=a("vSla")(De,Ne,!1,function(e){a("ibi6")},null,null).exports,$e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"myTable"},[a("el-table",{attrs:{data:e.data,"max-height":480,"highlight-current-row":e.config.isHigh},on:{"selection-change":e.select,"select-all":e.select,"row-dblclick":e.rowDblclick}},[e.config.isSelection?a("el-table-column",{attrs:{type:"selection",width:"50",align:e.config.align,disabled:e.data.length<0}}):e._e(),e._v(" "),e.config.isOrder?a("el-table-column",{attrs:{type:"index",label:"序号",align:e.config.align,width:"100"}}):e._e(),e._v(" "),e._l(e.config.colConfig,function(t,i){return a("el-table-column",{key:i,attrs:{fixed:t.fixed,prop:t.field,width:t.width,sortable:t.isSort,resizable:t.isResize,"show-overflow-tooltip":!0,label:t.label,align:e.config.align},scopedSlots:e._u([{key:"default",fn:function(i){return["text"===t.type?a("span",{style:{color:t.colorFun?t.colorFun(i.row[t.field]):"#666"}},[e._v(e._s(i.row[t.field]))]):"input"===t.type?a("el-input",{attrs:{size:"mini"},model:{value:i.row[t.field],callback:function(a){e.$set(i.row,t.field,a)},expression:"scope.row[item.field]"}}):"select"===t.type?a("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"mini"},model:{value:i.row[t.field],callback:function(a){e.$set(i.row,t.field,a)},expression:"scope.row[item.field]"}},e._l(i.row.selectData,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})):"button"==t.type?e._l(t.btnData,function(t,o){return a("el-button",{key:o,style:{color:t.color},attrs:{type:"text"},on:{click:function(a){e.handlerClick(i.row,t.method,i.$index)}}},[e._v(e._s(t.name))])}):"qw_status"==t.type?a("span",["进行中"==i.row[t.field]?a("span",{staticClass:"qw_status_on"}):e._e(),e._v(" "+e._s(i.row[t.field]))]):e._e()]}}])})})],2),e._v(" "),a("div",{staticClass:"my-pagination"},[e.config.isPage?a("el-pagination",{attrs:{"current-page":e.config.pageNo,"page-sizes":[20,40,60,80],"page-size":e.config.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.config.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1),e._v(" "),a("load",{directives:[{name:"show",rawName:"v-show",value:e.config.loadShow,expression:"config.loadShow"}]})],1)},staticRenderFns:[]};var ze=function(){return sessionStorage.getItem("ports")},Fe={components:{myTable2:a("vSla")({props:["config","data"],data:function(){return{}},methods:{handleSizeChange:function(e){this.config.isLoading&&(this.config.loadShow=!0),this.config.pageSize=e,this.$emit("pageChange")},handleCurrentChange:function(e){this.config.isLoading&&(this.config.loadShow=!0),this.config.pageNo=e,this.$emit("pageChange")},select:function(e){this.$emit("select",e)},rowDblclick:function(e){this.$emit("rowDblclick",e)},handlerClick:function(e,t,a){this.$emit(t,e,a)}}},$e,!1,function(e){a("9kjD")},null,null).exports},data:function(){return{searchData:{},searchConfig:[[{label:"内部订单号",field:"insideOrder",filterable:!0,type:"select",placeholder:"请输入/选择内部订单号",childrens:[]},{label:"产品信息",field:"prodMess",type:"input",placeholder:"请输入手机号码"},{label:"确认状态",field:"isCheck",type:"select",placeholder:"请选择确认状态",childrens:[{name:"已完工",value:!0},{name:"制作中",value:!1}]}]],tableData:[],tableConfig:{isHigh:!1,isSelection:!0,align:"center",loadShow:!1,isPage:!0,pageNo:1,pageSize:20,total:0,colConfig:[{field:"insideOrder",isResize:!0,label:"内部订单号",align:"center",type:"text"},{field:"prodMess",isResize:!0,label:"产品信息",align:"center",type:"text"},{field:"crafworkName",isResize:!0,label:"工艺名称",align:"center",type:"text"},{field:"doEmpName",isResize:!0,label:"工艺执行人",align:"center",type:"text"},{field:"okDatetime",isResize:!0,label:"完工日期",align:"center",type:"text"},{field:"getTime",isResize:!0,label:"领派工时间",align:"center",type:"text"},{field:"actHours",isResize:!0,label:"实际工时",align:"center",type:"text"},{field:"status",isResize:!0,label:"确认状态",align:"center",type:"qw_status"},{width:"200px",isResize:!0,label:"操作",align:"center",type:"button",btnData:[{name:"查看详情",method:"see"}]}]},toastConfig:{title:"查看详情",dialogVisible:!1,width:"900px",btnData:[{disabled:!1,isShow:!0,type:"primary",name:"关闭页面",method:"submit",bgColor:"dialog-bule"}]},rules:{},detailData:{},emptySrc:"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",detailData2:{pictureUrls:[]}}},created:function(){this.getDropOrderMes(),this.getList()},methods:{setAttr:function(e){for(var t in e)void 0!==e[t]&&null!==e[t]&&""!==e[t]||delete e[t];return e},getList:function(){var e=this;console.log(this.searchData);var t,a=s()({pageSize:this.tableConfig.pageSize,pageNo:this.tableConfig.pageNo},this.searchData);console.log(a),a=this.setAttr(a),console.log(a),t={params:a,success:function(t){t.items&&(e.tableData=t.items,e.tableConfig.loadShow=!1,e.tableConfig.total=t.numRows)},Vue:this},Y.post(ze()+"/taskFinishedMes/checkRecord",t.params,t.success,t.Vue)},pageChange:function(){this.getList()},sizeChange:function(){this.getList()},see:function(e){var t=this;t.detailData=e,function(e){Y.post(ze()+"/pictMess/pictDetail",e.params,e.success,e.Vue)}({params:{insideOrder:e.insideOrder,prodNo:e.prodNo,crafworkId:e.crafworkId,getTime:e.getTime},success:function(e){setTimeout(function(){t.detailData2=e,t.detailData2.pictureUrlsStyle=[];var a=[],i=!0,o=!1,s=void 0;try{for(var r,l=w()(e.pictureUrls);!(i=(r=l.next()).done);i=!0){var n=r.value;a.push('background: url("'+n+'") 100px 100px;')}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}t.detailData2.pictureUrlsStyle=a,console.log("that.detailData2==>",t.detailData2)},10),t.toastConfig.dialogVisible=!0},Vue:t})},handlerSearch:function(e){this.tableConfig.pageNo=1,this.getList()},getDropOrderMes:function(){var e,t=this;e={params:{pageSize:1e4,pageNo:1},success:function(e){console.log("res==>",e);var a=[];for(var i in e)a.push({name:e[i].insideOrder,value:e[i].insideOrder});t.searchConfig[0][0].childrens=a},Vue:this},Y.post(ze()+"/produceOrderAps/getOrder",e.params,e.success,e.Vue)}}},Le={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"jobAssignment"},[a("search",{attrs:{data:e.searchData,config:e.searchConfig},on:{search:e.handlerSearch}}),e._v(" "),a("my-table2",{attrs:{data:e.tableData,config:e.tableConfig},on:{pageChange:e.pageChange,see:e.see}}),e._v(" "),a("my-toast",{attrs:{config:e.toastConfig},on:{submit:function(t){e.toastConfig.dialogVisible=!1,e.$refs.ruleForm.resetFields()}}},[a("div",{staticClass:"form_box"},[a("el-form",{ref:"ruleForm",staticStyle:{"margin-right":"30px"},attrs:{model:e.detailData,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"订单编号"}},[a("span",{staticClass:"f_value"},[e._v(e._s(e.detailData.insideOrder))])])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品信息"}},[a("span",{staticClass:"f_value"},[e._v(e._s(e.detailData.prodMess))])])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"工艺名称"}},[a("span",{staticClass:"f_value"},[e._v(e._s(e.detailData.crafworkName))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"工艺执行人"}},[a("span",{staticClass:"f_value"},[e._v(e._s(e.detailData.doEmpName))])])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"上传人"}},[a("span",{staticClass:"f_value"},[e._v(e._s(e.detailData.sendEmp))])])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"完工日期"}},[a("span",{staticClass:"f_value"},[e._v(e._s(e.detailData.okDatetime))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"确认状态"}},[a("span",{staticClass:"f_value"},[e._v(e._s(e.detailData.status))])])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"上传时间"}},[a("span",{staticClass:"f_value"},[e._v(e._s(e.detailData.sendDate))])])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"说明"}},[a("span",{staticClass:"f_value"},[e._v(e._s(e.detailData.desc))])])],1)],1),e._v(" "),e.detailData2?a("el-row",[a("div",{staticClass:"img_box"},e._l(e.detailData2.pictureUrls,function(t,i){return a("li",{staticClass:"qw_pic_box"},[a("img",{staticClass:"qw_pic",attrs:{src:t||e.emptySrc}}),e._v(" "),a("p",{staticClass:"img_title"},[e._v("图片"+e._s(i+1))])])}))]):e._e()],1)],1)])],1)},staticRenderFns:[]},Ie=a("vSla")(Fe,Le,!1,null,null,null).exports,Ae=function(){return sessionStorage.getItem("ports")},Re={data:function(){return le()({loading:!1,userFocus:!1,dropDown:{empList:[],emailList:[],orderList:[]},productList:[],tableData:{},tableConfig:[[{label:"电子邮箱",field:"email",filterable:!0,type:"select",placeholder:"请选择订单编号",childrens:[],prop:{label:"email",value:"email"}},{label:"客户信息",field:"customMess",filterable:!0,type:"input",placeholder:"请选择客户信息",childrens:[],prop:{label:"customMess",value:"customNo"}}]],form:le()({sendAddress:"",customNo:"",customName:"",email:"",empNo:"",invoiceNo:"",orderNo:"",deliveryUrl:"",total:"",prodNo:"",remark:"",address:"",unit:"",customMess:""},"remark",""),rules:{sendAddress:[{required:!0,message:"此选择为必填项",trigger:["input","blur"]}],customName:[{required:!0,message:"此选择为必填项",trigger:"change"}],customNo:[{required:!0,message:"此选择为必填项",trigger:"change"}],email:[{required:!0,message:"此选择为必填项",trigger:"change"}],empNo:[{required:!0,message:"此选择为必填项",trigger:["input","blur"]}],invoiceNo:[{required:!0,message:"此选择为必填项",trigger:["input","blur"]}],orderNo:[{required:!0,message:"此选择为必填项",trigger:"change"}],deliveryUrl:[{required:!0,message:"此选择为必填项",trigger:"change"}],total:[{required:!0,message:"此选择为必填项",trigger:"change"}],remark:[{required:!1,message:"此选择为必填项",trigger:"change"}]},viewForm:{}},"form",{fileList:[],jobs:[]})},computed:s()({},Object(r.d)(["ports","prodTypeList"])),methods:{queryEmpInfo:function(e){var t,a=this,i={customMess:e};i=this.setAttr(i),t={params:i,success:function(e){var t=[],i=e;for(var o in i)t.push({customMess:i[o].customMess,customNo:i[o].customNo});a.dropDown.empList=t},Vue:this},Y.post(Ae()+"/deliveryProd/findCus",t.params,t.success,t.Vue)},empNoChange:function(e){if(/^\d{1,11}$/.test(e)){var t=!0,a=!1,i=void 0;try{for(var o,s=w()(this.dropDown.empList);!(t=(o=s.next()).done);t=!0){var r=o.value;if(r.customNo==e){this.form.customName=r.customMess,this.syncDropDown(e);break}}}catch(e){a=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw i}}}},syncDropDown:function(e){var t,a=this,i={customNo:e};i=this.setAttr(i),t={params:i,success:function(e){var t=[],i=!0,o=!1,s=void 0;try{for(var r,l=w()(e);!(i=(r=l.next()).done);i=!0){var n=r.value;t.push({label:n.email,value:n.email})}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}a.dropDown.emailList=t},Vue:this},Y.post(Ae()+"/deliveryProd/findEmail",t.params,t.success,t.Vue),function(e){Y.post(Ae()+"/deliveryProd/findOrder",e.params,e.success,e.Vue)}({params:i,success:function(e){var t=[],i=!0,o=!1,s=void 0;try{for(var r,l=w()(e);!(i=(r=l.next()).done);i=!0){var n=r.value;t.push({label:n.orderNo,value:n.orderNo})}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}a.dropDown.orderList=t},Vue:this})},orderNoChange:function(e){var t,a=this;e&&(t={params:{orderNo:e},success:function(e){a.$set(a.form,"total",e.sumTatal),a.$set(a.form,"deliveryUrl",e.deliveryUrl)},Vue:this},Y.post(Ae()+"/deliDetl/orderDetail",t.params,t.success,t.Vue))},setAttr:function(e){for(var t in e)void 0!==e[t]&&null!==e[t]&&""!==e[t]||delete e[t];return e},submit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;var a,i=s()({},e.form);i=e.setAttr(i),a={params:i,success:function(t){e.$message.success("操作成功！"),setTimeout(function(){for(var t in e.form)e.form[t]="";e.form.deliveryUrl="",e.$refs.ruleForm.clearValidate(),e.$refs.ruleForm.resetFields()}),e.dropDropDown={empList:[],emailList:[],orderList:[]}},Vue:e},Y.post(Ae()+"/deliveryProd/sendMess",a.params,a.success,a.Vue)})},savaAgain:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$http.post(e.ports+"/productStorePlm/addProduct",e.form,function(t){e.$refs.ruleForm.resetFields(),e.form={crafworkName:"",quartersEmp:"",actHours:"",unit:""},e.getList()},e)})},select:function(e){this.selectData=e,1==e.length?this.toolbarConfig.btnStatus=[!1,!1,!1]:0==e.length?this.toolbarConfig.btnStatus=[!1,!0,!0]:this.toolbarConfig.btnStatus=[!1,!0,!1]},getList:function(){var e=this;this.$http.post(this.ports+"/productStorePlm/pageProduct",{pageNo:this.tableConfig.pageNo,pageSize:this.tableConfig.pageSize},function(t){e.tableData=t.items,e.tableConfig.total=t.numRows},this)},pageChange:function(){this.getList()},see:function(e){this.viewForm=y()({},e),this.detailConfig.dialogVisible=!0}},mounted:function(){var e=this;this.getList(),this.$http.post(this.ports+"/deliveryProd/findEmail",{},function(t){e.tableConfig[0][0].childrens=t,e.productList=t},this)}},Oe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"writeEmail"},[a("el-form",{ref:"ruleForm",staticStyle:{"padding-left":"30px"},attrs:{data:e.tableData,config:e.tableConfig,model:e.form,rules:e.rules,"label-width":"100px","label-position":"right"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"寄件地址",prop:"sendAddress"}},[a("el-input",{attrs:{placeholder:"请输入寄件地址",maxlenth:"125",size:"medium"},model:{value:e.form.sendAddress,callback:function(t){e.$set(e.form,"sendAddress",t)},expression:"form.sendAddress"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{staticStyle:{position:"relative"},attrs:{label:"客户信息",prop:"customNo"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":e.queryEmpInfo,loading:e.loading},on:{change:e.empNoChange},model:{value:e.form.customNo,callback:function(t){e.$set(e.form,"customNo",t)},expression:"form.customNo"}},e._l(e.dropDown.empList,function(e){return a("el-option",{key:e.customMess,attrs:{label:e.customMess,value:e.customNo}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{ref:"email",attrs:{label:"电子邮箱",prop:"email"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"medium"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}},e._l(e.dropDown.emailList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"交图人",prop:"empNo"}},[a("el-input",{attrs:{maxlength:"10",placeholder:"请输入交图人"},model:{value:e.form.empNo,callback:function(t){e.$set(e.form,"empNo",t)},expression:"form.empNo"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发票号码",prop:"invoiceNo"}},[a("el-input",{attrs:{placeholder:"请输入发票号码",maxlength:"20",size:"medium"},model:{value:e.form.invoiceNo,callback:function(t){e.$set(e.form,"invoiceNo",t)},expression:"form.invoiceNo"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{ref:"order",attrs:{label:"订单号",prop:"orderNo"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"medium"},on:{change:e.orderNoChange},model:{value:e.form.orderNo,callback:function(t){e.$set(e.form,"orderNo",t)},expression:"form.orderNo"}},e._l(e.dropDown.orderList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"交图明细"}},[a("a",{directives:[{name:"show",rawName:"v-show",value:e.form.deliveryUrl,expression:"form.deliveryUrl"}],attrs:{href:e.form.deliveryUrl,target:"blank"}},[e._v(e._s(e.form.deliveryUrl))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"总价",prop:"total"}},[a("el-input",{attrs:{readonly:"",placeholder:"订单总价"},model:{value:e.form.total,callback:function(t){e.$set(e.form,"total",t)},expression:"form.total"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{placeholder:"请输入备注",maxlength:"125",type:"textarea",size:"medium"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("发送")])],1)],1)],1)},staticRenderFns:[]};var Ee=a("vSla")(Re,Oe,!1,function(e){a("fH20")},null,null).exports,Ve={data:function(){return{test1:{},test2:{},pictureUrls:[],rules:{customMess:C.require("string","客户信息不能为空"),orderNo:C.require("string","订单号不能为空"),typeId:C.require("string","请选择产品分类")},searchData:{},searchConfig:[[{label:"客户信息",field:"customMess",type:"input",placeholder:"请输入产品信息"},{label:"订单号",field:"orderNo",type:"select",placeholder:"请选择产品编码",childrens:[],prop:{label:"orderNo",value:"orderNo"}}]],tableData:[],tableConfig:{isHigh:!1,isSelection:!0,align:"center",isPage:!0,pageNo:1,pageSize:20,total:0,currentSelectArr:[],colConfig:[{fixed:!1,field:"customMess",width:"",isSort:!1,isResize:!0,label:"客户信息",align:"center",type:"text"},{fixed:!1,field:"empName",width:"",isSort:!1,isResize:!0,label:"交图人",align:"center",type:"text"},{fixed:!1,field:"invoiceNo",width:"",isSort:!1,isResize:!0,label:"发票号码",align:"center",type:"text"},{fixed:!1,field:"orderNo",width:"",isSort:!1,isResize:!0,label:"订单号",align:"center",type:"text"},{fixed:!1,field:"total",width:"",isSort:!1,isResize:!0,label:"总价",align:"center",type:"text"},{fixed:!1,field:"remark",width:"",isSort:!1,isResize:!0,label:"备注",align:"center",type:"text"},{fixed:!1,width:"150",isSort:!1,isResize:!0,label:"操作",align:"center",type:"button",btnData:[{name:"交图明细",method:"Cross"}]}]},toastConfig:{title:"产品明细",dialogVisible:!1,width:"1200px",btnData:[{isShow:!0,disabled:!1,name:"关闭页面",method:"cancel"}]},form:{customMess:"",empName:"",invoiceNo:"",total:"",remark:"",orderNo:"",typeId:""},form1:{crafworkName:"",empName:"",invoiceNo:"",total:"",remark:"",orderNo:"",typeId:""},form2:{crafworkName:"",empName:"",invoiceNo:"",total:"",remark:"",orderNo:"",typeId:""},viewForm:{},detailConfig:{title:"交图明细",dialogVisible:!1,width:"752px",btnData:[{isShow:!0,disabled:!1,bgColor:"dialog-deep-blue",name:"关闭窗口",method:"cancel"}]}}},computed:s()({},Object(r.d)(["ports","prodTypeList"])),methods:{getList:function(){var e=this;this.$http.post(this.ports+"/deliveryProd/deliPage",s()({pageNo:this.tableConfig.pageNo,pageSize:this.tableConfig.pageSize},this.searchData),function(t){e.tableData=t.items,e.tableConfig.total=t.numRows},this)},pageChange:function(){this.getList()},search:function(){this.tableConfig.pageNo=1,this.tableConfig.pageSize=20,this.getList()},Cross:function(e,t){var a=this;this.$http.post(this.ports+"/deliDetl/orderDetail",{orderNo:e.orderNo},function(e){a.test1=e,a.form={orderNo:e.taskFinishedMesDtos[0].orderNo,sum:e.sum,sumTatal:e.sumTatal,amount:e.taskFinishedMesDtos[0].amount,unit:e.taskFinishedMesDtos[0].unit,prodName:e.taskFinishedMesDtos[0].prodName,picture:e.taskFinishedMesDtos[0].picture,waresNo:e.taskFinishedMesDtos[0].waresNo,pictures:y()([],e),fileList:y()([],e)},a.detailConfig.dialogVisible=!0},this)},Cross1:function(e){var t=this;this.$http.post(this.ports+"/deliDetl/prodDelivery",{orderNo:this.form.orderNo,waresNo:this.form.waresNo},function(e){t.test2=e,console.log(e.pictMess,e,"-----"),t.form1=[],e.pictMess.forEach(function(a){t.form1.push({crafworkName:a.crafworkName,orderNo:a.orderNo,waresNo:a.waresNo,amount:a.amount,pictureUrls:a.pictureUrls,unit:a.unit,price:a.price,total:e.total,sumUnit:a.sumUnit,sumAmount:a.sumAmount,okDatetime:a.okDatetime})}),t.form2={total:e.total,sumAmount:e.sumAmount},t.toastConfig.dialogVisible=!0},this)}},mounted:function(){var e=this;this.getList(),this.$http.post(this.ports+"/deliveryProd/findOrderNo",{},function(t){e.searchConfig[0][1].childrens=t,e.productList=t},this)}},Te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sendEmail"},[a("search",{attrs:{data:e.searchData,config:e.searchConfig},on:{search:e.search}}),e._v(" "),a("my-table",{attrs:{data:e.tableData,config:e.tableConfig},on:{pageChange:e.pageChange,Cross:e.Cross}}),e._v(" "),a("my-toast",{attrs:{config:e.toastConfig},on:{cancel:function(t){e.toastConfig.dialogVisible=!1}}},[e._l(e.form1,function(t,i){return a("el-form",{key:i,ref:"ruleForm",refInFor:!0,attrs:{model:t,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-form-item",[e._v("\n                       "+e._s(t.crafworkName)+"\n                      ")])],1),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-form-item",e._l(t.pictureUrls,function(e){return a("img",{staticStyle:{height:"100px","max-width":"100px"},attrs:{src:e}})}))],1),e._v(" "),a("el-col",{staticClass:"detailMessage",attrs:{span:4}},[a("p",[e._v("\n                      小计："+e._s(t.price)+"\n                    ")]),e._v(" "),a("p",[e._v("\n                      完工时间："+e._s(t.okDatetime)+"\n                    ")])])],1)],1)}),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{"label-width":"100px"}},[a("el-row",{attrs:{gutter:18}},[a("el-col",{attrs:{span:6}},[a("el-form-item",[e._v("合计")])],1),e._v(" "),a("el-col",{attrs:{span:8,offset:8}},[a("el-form-item",[e._v("金额:"+e._s(e.form2.total))])],1)],1)],1)],2),e._v(" "),a("my-toast",{attrs:{data:e.tableData,config:e.detailConfig},on:{cancel:function(t){e.detailConfig.dialogVisible=!1}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.viewForm,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-form-item",[a("img",{staticStyle:{"margin-left":"30px",height:"100px","max-width":"100px"},attrs:{src:e.form.picture},on:{click:e.Cross1}})])],1)],1),e._v(" "),a("el-row",[a("el-col",[a("el-form-item",[e._v("\n                    "+e._s(e.form.prodName)+"×"+e._s(e.form.amount)+e._s(e.form.unit)+"\n                      ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",[e._v("合计")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",[e._v("合计数量:"+e._s(e.form.sum))])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",[e._v("金额:"+e._s(e.form.sumTatal))])],1)],1)],1)],1)],1)},staticRenderFns:[]};var Pe={data:function(){return{activeName:"first"}},components:{writeEmail:Ee,sendEmail:a("vSla")(Ve,Te,!1,function(e){a("yDyN")},null,null).exports}},Me={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"electronicHairMap"},[a("el-tabs",{attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"写邮件",name:"first"}},[a("write-email")],1),e._v(" "),a("el-tab-pane",{attrs:{label:"已发送邮件",name:"second"}},[a("send-email",{directives:[{name:"show",rawName:"v-show",value:"second"==e.activeName,expression:"activeName=='second'"}]})],1)],1)],1)},staticRenderFns:[]};var qe=a("vSla")(Pe,Me,!1,function(e){a("bt/U")},null,null).exports,He={data:function(){return{centerDialogVisible:!1,currentImg:"",productList:[],deleteArr:[],selectData:[],tableData:[],tableConfig:{isHigh:!1,isSelection:!1,align:"center",loadShow:!1,isPage:!0,pageNo:1,pageSize:20,total:0,colConfig:[{field:"orderNo",label:"销售订单号",type:"text"},{field:"customName",label:"客户信息",type:"text"},{field:"prodName",label:"产品信息",type:"text"},{field:"crafworkName",label:"工艺名称",type:"text"},{field:"createBy",label:"图片提交人",type:"text"},{field:"createTime",label:"上传日期",type:"text"},{label:"操作",type:"button",btnData:[{name:"查看详情",method:"upload"}]}]},searchData:{},searchConfig:[[{label:"订单编号",field:"orderNo",type:"select",placeholder:"请选择订单编号",childrens:[],prop:{label:"orderNo",value:"orderNo"}},{label:"客户信息",field:"customName",type:"input",placeholder:"请输入客户信息"},{label:"产品信息",field:"prodName",type:"input",placeholder:"请输入产品信息"},{label:"上传日期",field:"createDate",type:"daterange"}]],toastConfig:{title:"上传资料",dialogVisible:!1,width:"1000px",btnData:[{isShow:!0,name:"关闭弹窗",method:"close"}]},form:{fileList:[]}}},computed:s()({},Object(r.d)(["ports"])),components:{upload:he},mounted:function(){var e=this;this.getData(),this.$http.post(this.ports+"/processPictMes/optionInsideOrder",{},function(t){console.log(t,"111111"),e.searchConfig[0][0].childrens=t,e.productList=t},this)},methods:{upload:function(e,t){var a=this;this.$http.post(this.ports+"/processPictMes/findAllUploadPic",{id:e.id,orderNo:e.orderNo,prodNo:e.prodNo,crafworkId:e.crafworkId,customNo:e.customNo},function(t){console.log(t),a.form={orderNo:e.orderNo,prodName:e.prodName,prodNo:e.prodNo,crafworkName:e.crafworkName,crafworkId:e.crafworkId,customName:e.customName,customNo:e.customNo,createBy:e.createBy,createTime:e.createTime,empNo:e.empNo,pictures:y()([],t),fileList:y()([],t)},a.toastConfig.dialogVisible=!0},this)},close:function(){var e=this;this.$http.post(this.ports+"/crafworkApprove/approveStatus",{id:this.form.id,cusIsOk:3},function(t){e.getData(),e.toastConfig.dialogVisible=!1},this)},getData:function(){var e=this,t=JSON.parse(f()(this.searchData));for(var a in this.searchData.createDate&&(t.startDate=t.createDate[0],t.endDate=t.createDate[1],delete t.createDate),t)t[a]||delete t[a];this.$http.post(this.ports+"/processPictMes/pageAfterUpload",s()({pageNo:this.tableConfig.pageNo,pageSize:this.tableConfig.pageSize},t),function(t){e.tableData=t.items,e.tableConfig.total=t.numRows},this)},pageChange:function(){this.getData()},search:function(){this.tableConfig.pageNo=1,this.tableConfig.pageSize=20,this.getData()}}},Ue={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"seeUpLoad"},[a("search",{attrs:{data:e.searchData,config:e.searchConfig},on:{search:e.search}}),e._v(" "),a("my-table",{attrs:{data:e.tableData,config:e.tableConfig,"dialogVisible:false":""},on:{pageChange:e.pageChange,upload:e.upload}}),e._v(" "),a("my-toast",{attrs:{config:e.toastConfig},on:{close:function(t){e.toastConfig.dialogVisible=!1}}},[a("el-form",{ref:"ruleForm",staticStyle:{"margin-right":"30px"},attrs:{model:e.form,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"销售订单号"}},[e._v("\r\n                        "+e._s(e.form.orderNo)+"\r\n                    ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"客户信息"}},[e._v("\r\n                        "+e._s(e.form.customName)+"\r\n                    ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品信息"}},[e._v("\r\n                        "+e._s(e.form.prodName)+"\r\n                        ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"工艺名称"}},[e._v("\r\n                        "+e._s(e.form.crafworkName)+"\r\n                        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"图片提交人"}},[e._v("\r\n                        "+e._s(e.form.createBy)+"\r\n                    ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"上传日期"}},[e._v("\r\n                        "+e._s(e.form.createTime)+"\r\n                    ")])],1)],1),e._v(" "),a("el-row",[a("el-col",e._l(e.form.pictures,function(t,i){return a("div",{key:i,staticStyle:{width:"100px",margin:"10px",border:"1px solid #666",float:"left",position:"relative",height:"100px",overflow:"hidden"},style:{"margin-left":0==i?"100px":"0px"},on:{dblclick:function(a){e.centerDialogVisible=!0,e.currentImg=t}}},[a("img",{staticStyle:{width:"100%",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"},attrs:{src:t}})])}))],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.centerDialogVisible,width:"900px"},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("div",[a("div",{staticClass:"no-scroll",staticStyle:{"text-align":"center",width:"800px",height:"500px",position:"relative",overflow:"auto",margin:"0 auto"}},[a("img",{staticStyle:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)","max-width":"100%"},attrs:{src:e.currentImg}})])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("关 闭")])],1)])],1)},staticRenderFns:[]};var Be=a("vSla")(He,Ue,!1,function(e){a("kJqO")},null,null).exports;i.default.use(m.a);var je=new m.a({routes:[{path:"/index",name:"index",component:b,children:[{path:"/jobAssignmentHistory",name:"jobAssignmentHistory",component:Ie},{path:"/taskingRecord",name:"taskingRecord",component:ke},{path:"/customerUploadData",name:"customerUploadData",component:Se},{path:"/customerProcessReview",name:"customerProcessReview",component:we},{path:"/customerReview",name:"customerReview",component:ve},{path:"/approve",name:"approve",component:se},{path:"/receive",name:"receive",component:K},{path:"/jobAssignment",name:"jobAssignment",component:ae},{path:"/tasking",name:"tasking",component:j},{path:"/technology",name:"technology",component:D},{path:"/product",name:"product",component:A},{path:"/semi-manufactures",name:"semiManfactures",component:E},{path:"/productProcess",name:"productProcess",component:P},{path:"/internalOrder",name:"internalOrder",component:H},{path:"/electronicHairMap",name:"electronicHairMap",component:qe},{path:"/seeUpload",name:"seeUpload",component:Be}]}]}),Je={getHeader:function(e){var t=[],a=!0,i=!1,o=void 0;try{for(var s,r=w()(e);!(a=(s=r.next()).done);a=!0){var l=s.value;0==l.parentId&&t.push({title:l.alias})}}catch(e){i=!0,o=e}finally{try{!a&&r.return&&r.return()}finally{if(i)throw o}}return t},getTree:function(e,t){var a=[];if(t.id){var i=!0,o=!1,s=void 0;try{for(var r,l=w()(e);!(i=(r=l.next()).done);i=!0){var n=r.value;n.parentId==t.id&&a.push({name:n.alias,router:"/"+n.code,id:n.id})}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}}else{var c=!0,d=!1,u=void 0;try{for(var m,p=w()(e);!(c=(m=p.next()).done);c=!0){var f=m.value;0==f.parentId&&a.push({name:f.alias,router:"/"+f.code,id:f.id})}}catch(e){d=!0,u=e}finally{try{!c&&p.return&&p.return()}finally{if(d)throw u}}}if(a&&a.length>0){t.chlid=a;var h=!0,g=!1,b=void 0;try{for(var v,y=w()(a);!(h=(v=y.next()).done);h=!0){var _=v.value;_=this.getTree(e,_)}}catch(e){g=!0,b=e}finally{try{!h&&y.return&&y.return()}finally{if(g)throw b}}}return t}};i.default.use(r.a);var Qe=new r.a.Store({state:{ports:null,isLoading:!1,companyId:null,userId:null,userName:"",userImg:"",companyName:"",companyEnglish:"",companyLogo:"",prodTypeList:[],listMenu:[],menuList:[]},mutations:{setUserName:function(e,t){e.userName=t},setUserImg:function(e,t){e.userImg=t},setCompanyName:function(e,t){e.companyName=t},setCompanyEnglish:function(e,t){e.companyEnglish=t},setCompanyLogo:function(e,t){e.companyLogo=t},print:function(e,t){e.isLog&&console.log(t)},set_ports:function(e,t){e.ports=t},setCompanyId:function(e,t){e.companyId=t},setUserId:function(e,t){e.userId=t},loading:function(e){e.isLoading=!0},cancelLoad:function(e){e.isLoading=!1},setProdTypeList:function(e,t){e.prodTypeList=t},setList:function(e,t){var a=JSON.parse(t);a.length>0?(e.menuList=Je.getTree(a,{}).chlid,e.listMenu=a):(e.menuList=[],e.listMenu=[])}},getters:{getUserName:function(e){return e.userName},getUserImg:function(e){return e.userImg},getCompanyName:function(e){return e.companyName},getCompanyEnglish:function(e){return e.companyEnglish},getCompanyLogo:function(e){return e.companyLogo}}}),Ke=(a("KhYh"),a("7xIN"),{render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"loading",style:this.isFixed?"position:fixed":"position:absolute"},[this._m(0)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"loading-icon"},[t("span",{staticClass:"loading_1"}),this._v(" "),t("span",{staticClass:"loading_2"}),this._v(" "),t("span",{staticClass:"loading_3"}),this._v(" "),t("span",{staticClass:"loading_4"})])}]});var Ze=a("vSla")({props:["isFixed"]},Ke,!1,function(e){a("0KgS")},null,null).exports,We={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"poc-toast",attrs:{title:e.config.title,fullscreen:e.config.fullscreen,visible:e.config.dialogVisible,"close-on-click-modal":!1,"append-to-body":e.config.appendToBody,width:e.config.width},on:{"update:visible":function(t){e.$set(e.config,"dialogVisible",t)},close:function(t){e.callBack("handleClose")},open:function(t){e.callBack("handleOpen")}}},[e._t("default"),e._v(" "),a("div",{staticClass:"btn-group"},e._l(e.config.btnData,function(t){return a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"item.isShow"}],key:t.method,staticClass:"dialog-white",attrs:{type:t.type},on:{click:function(a){e.callBack(t.method)}}},[e._v(e._s(t.name))])}))],2)},staticRenderFns:[]};var Ye=a("vSla")({props:["config"],methods:{callBack:function(e){this.$emit(e)}}},We,!1,function(e){a("6I8k")},null,null).exports,Ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"myTable"},[a("el-table",{attrs:{data:e.data,"max-height":480,"highlight-current-row":e.config.isHigh},on:{"selection-change":e.select,"select-all":e.select,"row-dblclick":e.rowDblclick}},[e.config.isSelection?a("el-table-column",{attrs:{type:"selection",width:"50",align:e.config.align,disabled:e.data.length<0}}):e._e(),e._v(" "),e.config.isOrder?a("el-table-column",{attrs:{type:"index",label:"序号",align:e.config.align,width:"100"}}):e._e(),e._v(" "),e._l(e.config.colConfig,function(t,i){return a("el-table-column",{key:i,attrs:{fixed:t.fixed,prop:t.field,width:t.width,sortable:t.isSort,resizable:t.isResize,"show-overflow-tooltip":!0,label:t.label,align:e.config.align},scopedSlots:e._u([{key:"default",fn:function(i){return["text"===t.type?a("span",{style:{color:t.colorFun?t.colorFun(i.row[t.field]):"#666"}},[e._v(e._s(i.row[t.field]))]):"input"===t.type?a("el-input",{attrs:{size:"mini"},model:{value:i.row[t.field],callback:function(a){e.$set(i.row,t.field,a)},expression:"scope.row[item.field]"}}):"select"===t.type?a("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"mini"},model:{value:i.row[t.field],callback:function(a){e.$set(i.row,t.field,a)},expression:"scope.row[item.field]"}},e._l(i.row.selectData,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})):"button"==t.type?e._l(t.btnData,function(o,s){return[!o.showFunc||o.showFunc(i,t)?a("el-button",{key:s,style:{color:o.color},attrs:{type:"text"},on:{click:function(t){e.handlerClick(i.row,o.method,i.$index)}}},[e._v(e._s(o.name))]):e._e()]}):e._e()]}}])})})],2),e._v(" "),a("div",{staticClass:"my-pagination"},[e.config.isPage?a("el-pagination",{attrs:{"current-page":e.config.pageNo,"page-sizes":[20,40,60,80],"page-size":e.config.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.config.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1),e._v(" "),a("load",{directives:[{name:"show",rawName:"v-show",value:e.config.loadShow,expression:"config.loadShow"}]})],1)},staticRenderFns:[]};var Xe=a("vSla")({props:["config","data"],data:function(){return{}},methods:{handleSizeChange:function(e){this.config.isLoading&&(this.config.loadShow=!0),this.config.pageSize=e,this.$emit("pageChange")},handleCurrentChange:function(e){this.config.isLoading&&(this.config.loadShow=!0),this.config.pageNo=e,this.$emit("pageChange")},select:function(e){this.$emit("select",e)},rowDblclick:function(e){this.$emit("rowDblclick",e)},handlerClick:function(e,t,a){this.$emit(t,e,a)}}},Ge,!1,function(e){a("7hxv")},null,null).exports,et={props:{toolbarConfig:{type:Object,required:!0}},data:function(){return{}},methods:{btnClick:function(e,t){this.$emit(e)}}},tt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"clear toolbar"},[a("div",{staticClass:"toolright"},[a("span",[e._t("default")],2)]),e._v(" "),a("div",{staticClass:"toolleft"},e._l(e.toolbarConfig.custom,function(t,i){return a("el-button",{key:i,attrs:{loading:t.loading,type:t.type,size:"mini",disabled:e.toolbarConfig.btnStatus[i]},on:{click:function(a){e.btnClick(t.method,i)}}},[a("i",{class:t.isCustom?"iconfont icon-"+t.icon:"el-icon-"+t.icon,staticStyle:{"font-size":"12px","margin-right":"5px"}}),e._v(e._s(t.name))])}))])])},staticRenderFns:[]};var at=a("vSla")(et,tt,!1,function(e){a("+aqm"),a("vnKA")},"data-v-e5d581d0",null).exports,it={data:function(){return{isActive:""}},props:{pocHeaderData:Array},computed:s()({},Object(r.b)(["getUserName","getUserImg","getCompanyName","getCompanyEnglish","getCompanyLogo"])),mounted:function(){this.pocHeaderData.length>0&&(this.isActive=this.pocHeaderData[0].title)},methods:{headerBack:function(e,t){this.isActive=e.title,this.$emit("headerBack",t,e.title)}}},ot={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"poc-home"},[a("div",{staticClass:"poc-header clearfix"},[a("div",{staticClass:"poc-home-logo left"},[a("img",{staticClass:"left  bg-logo",attrs:{src:e.getCompanyLogo}}),e._v(" "),a("div",{staticClass:"poc-home-logo-r left"},[a("h1",{staticClass:"poc-home-title",attrs:{title:e.getCompanyName}},[e._v(e._s(e.getCompanyName))]),e._v(" "),a("p",{staticClass:"poc-home-mtitle",attrs:{title:e.getCompanyEnglish}},[e._v(e._s(e.getCompanyEnglish))])])]),e._v(" "),e._l(e.pocHeaderData,function(t,i){return a("div",{staticClass:"poc-home-navL left",class:{active:e.isActive===t.title},on:{click:function(a){e.headerBack(t,i)}}},[e._v("\n              "+e._s(t.title)+"\n        ")])}),e._v(" "),a("div",{staticClass:"poc-home-navR right"},[a("img",{attrs:{src:e.getUserImg,height:"30"}}),e._v(" "),a("span",[e._v(e._s(e.getUserName))])])],2)])},staticRenderFns:[]};var st=a("vSla")(it,ot,!1,function(e){a("gEHn")},null,null).exports,rt={props:["pageData"],data:function(){return{sidebarData:{},setTitle:"",h1:"",title:"",isSidebar:!0}},mounted:function(){this.sidebarData=this.pageData.sidebarData[0],console.log(this.sidebarData,"////"),this.h1=this.sidebarData.title;var e=this.sidebarData.chlid[0].chlid;this.sidebarData.path=this.pageData.sidebarData[0].chlid[0].chlid[0].router,this.$router.push(this.pageData.sidebarData[0].chlid[0].chlid[0].router),this.setTitle=" / "+this.sidebarData.chlid[0].name+(e?" / "+e[0].name:"")},methods:{slideBack:function(e){var t=e.split("/");this.setTitle=this.title+e,this.h1=t[t.length-1]},headerBack:function(e,t){var a=this;this.sidebarData=this.pageData.sidebarData[e],this.h1=t,this.title=t;var i=this.sidebarData.data[0].chlid;this.setTitle=" / "+this.sidebarData.data[0].name+(i?" / "+i[0].name:"");var o=this.sidebarData.data[0].chlid?this.sidebarData[0].chlid[0]:this.sidebarData.data[0];this.$router.push({path:o.router}),this.isSidebar=!1,setTimeout(function(){a.isSidebar=!0},0)}}},lt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"poc-page"},[a("poc-header",{attrs:{pocHeaderData:e.pageData.pocHeaderData},on:{headerBack:e.headerBack}}),e._v(" "),a("div",{staticClass:"poc-page-main clearfix"},[e.isSidebar?a("sidebar",{ref:"sidebar",attrs:{config:e.sidebarData},on:{slideBack:e.slideBack}}):e._e(),e._v(" "),a("div",{staticClass:"poc-page-body",class:e.sidebarData.visible?"left-go":"left-back"},[a("div",{staticClass:"bread-crumbs"},[a("p",[e._v(e._s(e.setTitle))]),e._v(" "),a("h1",[e._v(e._s(e.h1))])]),e._v(" "),a("div",[a("router-view")],1)])],1)],1)},staticRenderFns:[]};var nt=a("vSla")(rt,lt,!1,function(e){a("+DJr")},null,null).exports,ct={data:function(){return{minValue:-1/0,maxValue:1/0}},props:["value"],methods:{handleMinChange:function(e){/^(-?\d+)(\.\d+)?$/.test(e)?(this.$set(this.value,0,parseInt(this.value[0])),parseInt(this.value[0])>=parseInt(this.value[1])&&this.$set(this.value,1,parseInt(this.value[0])+1)):this.$set(this.value,0,null)},handleMaxChange:function(e){this.$set(this.value,1,parseInt(this.value[1])),/^(-?\d+)(\.\d+)?$/.test(e)?parseInt(this.value[1])<=parseInt(this.value[0])&&this.$set(this.value,0,parseInt(this.value[1])-1):this.$set(this.value,1,null)}}},dt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"minNum"},[a("el-input",{staticStyle:{width:"100%"},attrs:{size:"mini"},on:{change:e.handleMinChange},model:{value:e.value[0],callback:function(t){e.$set(e.value,0,t)},expression:"value[0]"}})],1),e._v(" "),e._m(0),e._v(" "),a("div",{staticClass:"maxNum"},[a("el-input",{staticStyle:{width:"100%"},attrs:{size:"mini"},on:{change:e.handleMaxChange},model:{value:e.value[1],callback:function(t){e.$set(e.value,1,t)},expression:"value[1]"}})],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"center"},[t("span",[this._v("至")])])}]};var ut=a("vSla")(ct,dt,!1,function(e){a("QSKW")},"data-v-41cb2e76",null).exports,mt={data:function(){return{isShow:!1,initData:{}}},props:{data:{type:Object,default:{},required:!0},config:{type:Array,default:{},required:!0}},created:function(){var e=!0,t=!1,a=void 0;try{for(var i,o=w()(this.config);!(e=(i=o.next()).done);e=!0){var s=i.value,r=!0,l=!1,n=void 0;try{for(var c,d=w()(s);!(r=(c=d.next()).done);r=!0){var u=c.value;"checkbox"!=u.type&&"cascader"!=u.type&&"numRange"!=u.type?this.data[u.field]||this.$set(this.data,u.field,null):"numRange"==u.type?this.data[u.field]||this.$set(this.data,u.field,[null,null]):this.data[u.field]||this.$set(this.data,u.field,[])}}catch(e){l=!0,n=e}finally{try{!r&&d.return&&d.return()}finally{if(l)throw n}}}}catch(e){t=!0,a=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw a}}this.initData=JSON.parse(f()(this.data))},components:{numRange:ut},methods:{handler:function(e,t){this.$emit(e,t)},search:function(){this.$emit("search",this.data)},init:function(){for(var e in console.log(this.initData),this.data)this.data[e]=JSON.parse(f()(this.initData))[e]},handleSelect:function(e){this.$emit("handleSelect",e)},getDate:function(e){var t=[],a=!0,i=!1,o=void 0;try{for(var s,r=w()(e);!(a=(s=r.next()).done);a=!0){var l=s.value;l.constructor,Date,t.push(l)}}catch(e){i=!0,o=e}finally{try{!a&&r.return&&r.return()}finally{if(i)throw o}}return t.join("至")},getRange:function(e){return null==e[0]&&null==e[1]?"全部":null==e[0]&&null!=e[1]?"小于"+e[1]:null!=e[0]&&null==e[1]?"大于"+e[0]:"大于"+e[0]+"且小于"+e[1]},getCascader:function(e,t){var a=[],i=t;if(e.length>0){for(var o=0;o<e.length;o++){var s=i.findIndex(function(t){return t.value==e[o]});s>=0&&(a.push(i[s].name),void 0!=i[s].children&&(i=i[s].children))}return a.join("/")}return"全部"},getSelectDate:function(e,t){var a=t.findIndex(function(t){return t.value==e});return a>=0?t[a].name:"全部"}}},pt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search"},[a("div",{staticClass:"otherContent"},[a("div",{staticClass:"search-laber",staticStyle:{"font-size":"14px"}},[e._v("筛选条件：")]),e._v(" "),a("div",{staticClass:"search-con"},e._l(e.config,function(t,i){return a("div",{key:i,staticClass:"search-value-con clear"},e._l(t,function(t,i){return a("div",{key:i,staticClass:"search-value"},[a("span",[""==e.data[t.field]||null==e.data[t.field]?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"全部",placement:"top-start"}},[a("small",[e._v(e._s(t.label)+":全部")])]):"select"==t.type||"radio"==t.type?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.getSelectDate(e.data[t.field],t.childrens),placement:"top-start"}},[a("small",[e._v(e._s(t.label)+":"+e._s(e.getSelectDate(e.data[t.field],t.childrens)))])]):e.data[t.field].constructor==Array&&"numRange"!=t.type&&"cascader"!=t.type?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.getDate(e.data[t.field]),placement:"top-start"}},[a("small",[e._v(e._s(t.label)+":"+e._s(e.getDate(e.data[t.field])))])]):e.data[t.field].constructor==Array&&"numRange"==t.type?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.getRange(e.data[t.field]),placement:"top-start"}},[a("small",[e._v(e._s(t.label)+":"+e._s(e.getRange(e.data[t.field])))])]):e.data[t.field].constructor==Array&&"cascader"==t.type?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.getCascader(e.data[t.field],t.childrens),placement:"top-start"}},[a("small",[e._v(e._s(t.label)+":"+e._s(e.getCascader(e.data[t.field],t.childrens)))])]):(e.data[t.field].constructor,Date,a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.data[t.field],placement:"top-start"}},[a("small",[e._v(e._s(t.label)+":"+e._s(e.data[t.field]))])]))],1)])}))})),e._v(" "),a("div",{staticClass:"search-btns",staticStyle:{"font-size":"14px","line-height":"34px"}},[e.isShow?e._e():a("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-arrow-down"},on:{click:function(t){e.isShow=!e.isShow}}},[e._v("显示筛选")]),e._v(" "),e.isShow?a("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-arrow-up"},on:{click:function(t){e.isShow=!e.isShow}}},[e._v("隐藏筛选")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-close"},on:{click:e.init}},[e._v("清空筛选")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1)]),e._v(" "),a("transition",{attrs:{name:"el-zoom-in-top"}},[e.isShow?a("div",{staticClass:"content"},e._l(e.config,function(t,i){return a("el-form",{key:i,ref:"form",refInFor:!0,attrs:{inline:!0,model:e.data,"label-width":"110px"}},e._l(t,function(t,i){return a("el-form-item",{key:i,staticStyle:{height:"46px"},attrs:{label:t.label,size:"mini"}},["radioButton"==t.type?a("el-radio-group",{on:{change:function(a){e.handler(t.method,e.data[t.field])}},model:{value:e.data[t.field],callback:function(a){e.$set(e.data,t.field,a)},expression:"data[item.field]"}},e._l(t.childrens,function(t){return a("el-radio-button",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.name))])})):e._e(),e._v(" "),"input"==t.type?a("el-input",{attrs:{disabled:t.disabled},model:{value:e.data[t.field],callback:function(a){e.$set(e.data,t.field,a)},expression:"data[item.field]"}}):e._e(),e._v(" "),"searchInput"==t.type?a("el-autocomplete",{attrs:{disabled:t.disabled,"fetch-suggestions":t.searchMethod},on:{select:e.handleSelect},model:{value:e.data[t.field],callback:function(a){e.$set(e.data,t.field,a)},expression:"data[item.field]"}}):e._e(),e._v(" "),"year"==t.type?a("el-date-picker",{attrs:{disabled:t.disabled,type:t.type,"value-format":"yyyy"},model:{value:e.data[t.field],callback:function(a){e.$set(e.data,t.field,a)},expression:"data[item.field]"}}):e._e(),e._v(" "),"month"==t.type?a("el-date-picker",{attrs:{disabled:t.disabled,type:t.type,"value-format":"yyyy-MM"},model:{value:e.data[t.field],callback:function(a){e.$set(e.data,t.field,a)},expression:"data[item.field]"}}):e._e(),e._v(" "),"daterange"==t.type||"date"==t.type?a("el-date-picker",{attrs:{disabled:t.disabled,type:t.type,"value-format":"yyyy-MM-dd"},model:{value:e.data[t.field],callback:function(a){e.$set(e.data,t.field,a)},expression:"data[item.field]"}}):e._e(),e._v(" "),"datetimerange"==t.type||"datetime"==t.type?a("el-date-picker",{attrs:{disabled:t.disabled,type:t.type,"value-format":"yyyy-MM-dd hh:mm:ss"},model:{value:e.data[t.field],callback:function(a){e.$set(e.data,t.field,a)},expression:"data[item.field]"}}):e._e(),e._v(" "),"radio"==t.type?a("el-radio-group",{attrs:{disabled:t.disabled},model:{value:e.data[t.field],callback:function(a){e.$set(e.data,t.field,a)},expression:"data[item.field]"}},e._l(t.childrens,function(t,i){return a("el-radio",{key:i,style:{color:t.color},attrs:{border:"",label:t.value}},[e._v(e._s(t.name))])})):e._e(),e._v(" "),"checkbox"==t.type?a("el-checkbox-group",{attrs:{max:t.max,disabled:t.disabled},model:{value:e.data[t.field],callback:function(a){e.$set(e.data,t.field,a)},expression:"data[item.field]"}},e._l(t.childrens,function(t){return a("el-checkbox",{key:t.value,style:{color:t.color},attrs:{border:"",label:t.value}},[e._v(e._s(t.name))])})):e._e(),e._v(" "),"number"==t.type?a("el-input-number",{attrs:{disabled:t.disabled,min:t.min,max:t.max,controls:t.isControls,"controls-position":t.controlPos},model:{value:e.data[t.field],callback:function(a){e.$set(e.data,t.field,a)},expression:"data[item.field]"}}):e._e(),e._v(" "),"select"==t.type?a("el-select",{attrs:{disabled:t.disabled,clearable:"",filterable:t.filterable},model:{value:e.data[t.field],callback:function(a){e.$set(e.data,t.field,a)},expression:"data[item.field]"}},e._l(t.childrens,function(e){return a("el-option",{key:e.value,attrs:{label:t.prop?e[t.prop.label]:e.name,value:t.prop?e[t.prop.value]:e.value}})})):e._e(),e._v(" "),"cascader"==t.type?a("el-cascader",{attrs:{disabled:t.disabled,clearable:"","change-on-select":"",options:t.childrens,props:{label:"name"}},model:{value:e.data[t.field],callback:function(a){e.$set(e.data,t.field,a)},expression:"data[item.field]"}}):e._e(),e._v(" "),"numRange"==t.type?a("numRange",{model:{value:e.data[t.field],callback:function(a){e.$set(e.data,t.field,a)},expression:"data[item.field]"}}):e._e()],1)}))})):e._e()])],1)},staticRenderFns:[]};var ft=a("vSla")(mt,pt,!1,function(e){a("HImF")},"data-v-b91dab98",null).exports,ht={props:{config:{type:Object,required:!0}},computed:{menuDrag:function(){return this.config.visible?"el-icon-d-arrow-left menu-drag-go":"el-icon-d-arrow-right menu-drag-back"},sidebar:function(){return this.config.visible?"menu-slide-enter-active":"menu-slide-enter"}},methods:{router:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=" / "+e.name+(t.name?" / "+t.name:"");this.$emit("slideBack",a)},goback:function(){this.config.visible=!this.config.visible}}},gt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menu_nav_collapse",class:e.sidebar},[a("div",{staticClass:"menu-slide-header"},[a("span",[e._v(e._s(e.config.title))])]),e._v(" "),a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.config.path,"background-color":"#001529","text-color":"#fff",router:"","active-text-color":"white","unique-opened":""}},[e._l(e.config.chlid,function(t,i){return[t.chlid?a("el-submenu",{attrs:{index:t.router}},[a("template",{slot:"title"},[a("span",[e._v(e._s(t.name))])]),e._v(" "),a("el-menu-item-group",e._l(t.chlid,function(i){return a("el-menu-item",{key:i.router,attrs:{index:i.router},on:{click:function(a){e.router(t,i)}}},[e._v(e._s(i.name))])}))],2):a("el-menu-item",{attrs:{index:t.router},on:{click:function(a){e.router(t)}}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])])]})],2),e._v(" "),a("span",{staticClass:"el-icon-d-arrow-left",class:e.menuDrag,on:{click:e.goback}})],1)},staticRenderFns:[]};var bt=a("vSla")(ht,gt,!1,function(e){a("9laP")},null,null).exports,vt={data:function(){return{treeData:[],filterText:"",initData:{}}},props:{readOnly:{type:Boolean,default:!0},props:{type:Object,default:function(){return{label:"label"}}},buttons:{type:Array,default:function(){return[]}},rootData:{type:Array,default:function(){return[]}}},methods:{handlerClick:function(e,t,a){this.$emit(a,e,t)},nodeChange:function(e,t){this.$emit("nodeChange",t,e)},filterNode:function(e,t,a){return!e||(a.level<3?-1!==t[this.props.label].indexOf(e):-1!==t[this.props.label].indexOf(e)||-1!==a.parent.data[this.props.label].indexOf(e))},loadNode:function(e,t){0==e.level?this.rootData.length>0?t(this.rootData):t([this.initData]):this.$emit("loadNode",e,t,e.data.id)}},created:function(){this.initData={id:0,isLeaf:!1},this.$set(this.initData,this.props.label,"root")},mounted:function(){this.$emit("init",this.$refs.modelTree.root)},watch:{filterText:function(e){this.$refs.modelTree.filter(e)}}},yt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modelTree"},[a("div",{staticClass:"search"},[a("el-input",{attrs:{size:"mini",placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1),e._v(" "),a("el-tree",{ref:"modelTree",attrs:{"empty-text":"暂无相关数据,请先新增",data:e.treeData,"highlight-current":"",props:e.props,load:e.loadNode,"default-expand-all":"",lazy:"","filter-node-method":e.filterNode},on:{"current-change":e.nodeChange},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,o=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",{staticClass:"text"},[e._v(e._s(i.label))]),e._v(" "),0==e.readOnly?a("span",{staticClass:"btns"},e._l(e.buttons,function(t){return!t.isShowFun||t.isShowFun(i)?a("el-button",{key:t.method,attrs:{type:"text",size:"mini",icon:"el-icon-"+t.icon},on:{click:function(a){return a.stopPropagation(),e.handlerClick(i,o,t.method)}}}):e._e()})):e._e()])}}])})],1)},staticRenderFns:[]};var _t=a("vSla")(vt,yt,!1,function(e){a("kep5")},null,null).exports,wt=a("KG1Q"),Ct=a.n(wt);i.default.prototype.$http=Y;i.default.prototype.log=function(e){console.log(e)},i.default.use(Ct.a),i.default.use(u.a),i.default.component("search",ft),i.default.component("load",Ze),i.default.component("my-toast",Ye),i.default.component("my-table",Xe),i.default.component("toolbar",at),i.default.component("pocHeader",st),i.default.component("Page",nt),i.default.component("Sidebar",bt),i.default.component("tree",_t),new i.default({store:Qe,router:je,el:"#app",components:{App:c}})},OaRt:function(e,t){},QSKW:function(e,t){},ZsCt:function(e,t){},"bt/U":function(e,t){},dRIH:function(e,t){},fH20:function(e,t){},g4fd:function(e,t){},gEHn:function(e,t){},ibi6:function(e,t){},kJqO:function(e,t){},kep5:function(e,t){},lCul:function(e,t){},lEK5:function(e,t){},lsEp:function(e,t){},m4aw:function(e,t){},nl6p:function(e,t){},omQM:function(e,t){},qhJx:function(e,t){},vnKA:function(e,t){},yDyN:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.841a7e274db58583698f.js.map